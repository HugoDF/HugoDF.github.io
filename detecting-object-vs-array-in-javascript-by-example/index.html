<!DOCTYPE html>
<html lang="en-US" />
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="google-site-verification" content="gBfbdXRLofaOyHsbgiSiuCIHKPaviGMRVWh_qOfDHNE" />

    <title>JavaScript “is array” in-depth &middot; Code with Hugo</title>

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#00aba9">
    <meta name="theme-color" content="#090a0b">

    <link rel="shortcut icon" href="https://codewithhugo.com/favicon.ico" />
    <meta name="theme-color" content="#090a0b">
    
    <link rel="canonical" href="https://codewithhugo.com/detecting-object-vs-array-in-javascript-by-example/" /> 

     <meta name="description" content="&lt;blockquote&gt;
&lt;p&gt;Detecting Array vs Object in JavaScript with examples&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;tl;dr&lt;/strong&gt; To detect if something is an Array in JavaScr" /> 

     
    
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:image" content="https://codewithhugo.com/img/joshua-coleman-unsplash.jpg"/>
    
 
    <meta name="twitter:title" content="JavaScript “is array” in-depth"/>
    <meta name="twitter:description" content="&lt;blockquote&gt;
&lt;p&gt;Detecting Array vs Object in JavaScript with examples&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;tl;dr&lt;/strong&gt; To detect if something is an Array in JavaScr"/>
    <meta name="twitter:url" content="https://codewithhugo.com/detecting-object-vs-array-in-javascript-by-example/" />
    <meta name="twitter:site" content="@hugo__df"/>

    <meta property="og:site_name" content="Code with Hugo" />
    <meta property="og:title" content="JavaScript “is array” in-depth &middot; Code with Hugo" />
    <meta property="og:url" content="https://codewithhugo.com/detecting-object-vs-array-in-javascript-by-example/" />
    

    <meta property="og:type" content="article" />
    <meta property="og:description" content="&lt;blockquote&gt;
&lt;p&gt;Detecting Array vs Object in JavaScript with examples&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;tl;dr&lt;/strong&gt; To detect if something is an Array in JavaScr" />

    <meta property="article:published_time" content="2018-12-10T00:00:00Z" />
    <meta property="article:tag" content="JavaScript" /><meta property="article:tag" content="tip" />

    <meta property="og:image" content="https://codewithhugo.com/img/joshua-coleman-unsplash.jpg"/>


    <meta name="generator" content="Hugo 0.46" />

    <!-- Stylesheets -->
    <link rel="stylesheet" type="text/css" href="https://codewithhugo.com/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="https://codewithhugo.com/css/casper-two.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" />
    
      
      <link rel="stylesheet" href="https://codewithhugo.com/overrides.min.bd35cf74c58c56c4aa8eff40730357744dec20ff31d8bae7b0618dbe30e0dbe4.css">
    
      
      <link rel="stylesheet" href="https://codewithhugo.com/syntax.min.e1646a3f88f77e1b5e7d0253633b1958013aa132890dfe4d7e15dc4718d4aecc.css">
    
      
      <link rel="stylesheet" href="https://codewithhugo.com/cta.min.612120dbcad38a206f6cc18996cd1f7d45141911bf04c86ab0c6132a55274b7b.css">
    

    

     
</head>


<body class="post-template">
  <div class="site-wrapper"> 

<header class="site-header outer">
  <div class="inner">
    <nav class="site-nav">
      <div class="site-nav-left">

        <ul class="nav" role="menu">
        
        
        
            <li class="" role="menuitem">
              <a href="/">Home</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/guides/">guides</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/tags/javascript/">JavaScript</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/tags/node/">Node</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/tags/css/">CSS</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/open/">#open</a>
            </li>
        
      </ul></div>

      <div class="site-nav-right">
        <div class="social-links">
                    

                    <a class="social-link social-link-tw" href="https://twitter.com/hugo__df" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg></a>

                    <a class="social-link" href="https://github.com/HugoDF" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a>

                    

                    <a class="social-link" href="https://medium.com/@hugo__df" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 195 195"><path d="M46.5340803,65.2157554 C46.6968378,63.6076572 46.0836,62.018231 44.8828198,60.93592 L32.6512605,46.2010582 L32.6512605,44 L70.6302521,44 L99.9859944,108.380952 L125.794585,44 L162,44 L162,46.2010582 L151.542017,56.2281011 C150.640424,56.9153477 150.193188,58.0448862 150.380019,59.1628454 L150.380019,132.837155 C150.193188,133.955114 150.640424,135.084652 151.542017,135.771899 L161.755369,145.798942 L161.755369,148 L110.38282,148 L110.38282,145.798942 L120.963119,135.527337 C122.002801,134.487948 122.002801,134.182246 122.002801,132.592593 L122.002801,73.0417402 L92.585901,147.755438 L88.6106443,147.755438 L54.3622782,73.0417402 L54.3622782,123.115814 C54.0767278,125.221069 54.7759199,127.3406 56.2581699,128.863022 L70.0186741,145.55438 L70.0186741,147.755438 L31,147.755438 L31,145.55438 L44.7605042,128.863022 C46.2319621,127.338076 46.8903838,125.204485 46.5340803,123.115814 L46.5340803,65.2157554 Z"/></svg></a>
        </div>  
        
        <a class="subscribe-button" href="https://codewithhugo.com/index.xml">Subscribe</a>
            
      </div>

    </nav>  

  </div>
</header>

<main id="site-main" class="site-main outer" role="main">
  <div class="inner">
    
      
<div id="codefund_ad"></div>


<article class="post-full post">
    <header class="post-full-header">
        <section class="post-full-meta">
            <time class="post-full-meta-date" datetime="2018-12-10">10 December 2018</time>
                <span class="date-divider">/</span> <a href="https://codewithhugo.com/tags/javascript/">#JavaScript</a>&nbsp;<a href="https://codewithhugo.com/tags/tip/">#tip</a>&nbsp;
        </section>
        <h1 class="post-full-title">JavaScript “is array” in-depth</h1>
    </header>
    <div class="hero-container">

      
      <figure class="post-full-image" style="background-image: url(https://codewithhugo.com/img/joshua-coleman-unsplash.jpg)">
        

      </figure>
    </div>

    <section class="post-full-content">
        <div class="kg-card-markdown">
        <blockquote>
<p>Detecting Array vs Object in JavaScript with examples</p>
</blockquote>

<p><strong>tl;dr</strong> To detect if something is an Array in JavaScript, use <code>Array.isArray(somethingObjectToCheck)</code>.</p>

<p>This post is a quarter useful, quarter history lesson, half quirky JavaScript exploration.</p>

<p></p>

<p>Table of contents:</p>

<ul>
<li><a href="#arrayisarray-behaviour-with-different-types">Array.isArray behaviour with different types</a></li>
<li><a href="#whats-so-special-about-arrayisarray">What’s so special about <code>Array.isArray</code>?</a></li>
<li><a href="#implementation-options">Implementation options</a>

<ul>
<li><a href="#the-official-polyfill">The official polyfill</a></li>
<li><a href="#the-duck-typing-approach">The duck-typing approach</a></li>
<li><a href="#checking-the-prototypeconstructorinstance-type">Checking the prototype/constructor/instance type</a></li>
</ul></li>
<li><a href="#array-vs-object-application">Array vs Object: application</a></li>
</ul>

<h2 id="array-isarray-behaviour-with-different-types">Array.isArray behaviour with different types</h2>

<p>Examples for this section at <a href="https://beta.observablehq.com/@hugodf/javascript-array-detection-using-array-isarray">observablehq.com/@hugodf/javascript-array-detection-using-array-isarray</a>, you can play around with the <code>values</code> list if anything is missing (<a href="https://beta.observablehq.com/@hugodf/javascript-array-detection-using-array-isarray#values">click here to do that</a>).</p>

<p>See below the full table for values for which <code>Array.isArray</code> evaluates to <code>true</code> for. Which is to say <code>Array.isArray</code> works, since it’s only true for Arrays, and it’s true for any Array.
No matter how it’s initialised and whether or not it’s been initialised using the local window’s Array or another one’s.</p>

<p>For people who are here to know how to detect if an object is an Array: use <code>Array.isArray</code>.
That’s it, off you go and solve problems.</p>

<p>For those who want some extra spicy JavaScript coding and want to understand what makes a JavaScript Array an Array you read on or
<a href="#whats-so-special-about-arrayisarray">skip to where, we’re going to re-implement <code>isArray</code></a>.</p>

<table>
<thead>
<tr>
<th>Type</th>
<th>Value as JSON</th>
<th>Array.isArray</th>
</tr>
</thead>

<tbody>
<tr>
<td>Empty Array</td>
<td>[]</td>
<td>true</td>
</tr>

<tr>
<td>Array of Number literal</td>
<td>[1,2,3]</td>
<td>true</td>
</tr>

<tr>
<td>Array of String literal</td>
<td>[&ldquo;a&rdquo;,&ldquo;b&rdquo;,&ldquo;c&rdquo;]</td>
<td>true</td>
</tr>

<tr>
<td>Array (using constructor.from)</td>
<td>[null,null,null,null,null,null,null,null,null,null]</td>
<td>true</td>
</tr>

<tr>
<td>Array with empty values using constructor</td>
<td>[null,null,null,null,null,null,null,null,null,null]</td>
<td>true</td>
</tr>

<tr>
<td>Array with values using constructor</td>
<td>[1,2,3]</td>
<td>true</td>
</tr>

<tr>
<td>Array prototype</td>
<td>[]</td>
<td>true</td>
</tr>

<tr>
<td>Array from other window</td>
<td>[1,2,3]</td>
<td>true</td>
</tr>

<tr>
<td>Empty Object</td>
<td>{}</td>
<td>false</td>
</tr>

<tr>
<td>Object with <code>.length</code> property</td>
<td>{&ldquo;length&rdquo;:10}</td>
<td>false</td>
</tr>

<tr>
<td>Object whose <code>__prototype__</code> is Array</td>
<td>{}</td>
<td>false</td>
</tr>

<tr>
<td>Object</td>
<td>{&ldquo;a&rdquo;:&ldquo;2&rdquo;,&ldquo;b&rdquo;:&ldquo;c&rdquo;}</td>
<td>false</td>
</tr>

<tr>
<td>Object with nested Array</td>
<td>{&ldquo;nested&rdquo;:[&ldquo;2&rdquo;,&ldquo;c&rdquo;]}</td>
<td>false</td>
</tr>

<tr>
<td>Empty Set</td>
<td>{}</td>
<td>false</td>
</tr>

<tr>
<td>Set of String</td>
<td>{}</td>
<td>false</td>
</tr>

<tr>
<td>Set of Number</td>
<td>{}</td>
<td>false</td>
</tr>

<tr>
<td>Empty Map</td>
<td>{}</td>
<td>false</td>
</tr>

<tr>
<td>Map with different types</td>
<td>{}</td>
<td>false</td>
</tr>

<tr>
<td>String literal</td>
<td>&ldquo;hello world&rdquo;</td>
<td>false</td>
</tr>

<tr>
<td>String Object</td>
<td>&ldquo;hello world&rdquo;</td>
<td>false</td>
</tr>

<tr>
<td>Boolean true literal</td>
<td>true</td>
<td>false</td>
</tr>

<tr>
<td>Boolean falst literal</td>
<td>false</td>
<td>false</td>
</tr>

<tr>
<td>Explicity undefined</td>
<td>undefined</td>
<td>false</td>
</tr>

<tr>
<td>Implicit undefined</td>
<td>undefined</td>
<td>false</td>
</tr>

<tr>
<td>null</td>
<td>null</td>
<td>false</td>
</tr>

<tr>
<td>Number (integer)</td>
<td>123</td>
<td>false</td>
</tr>

<tr>
<td>Number (float)</td>
<td>1.23</td>
<td>false</td>
</tr>
</tbody>
</table>

<h2 id="what-s-so-special-about-array-isarray">What’s so special about <code>Array.isArray</code>?</h2>

<p>Also known as the “why don’t we just use <code>instanceof Array</code>?” problem.</p>

<blockquote>
<p>When checking for <code>Array</code> instance, <code>Array.isArray</code> is preferred over <code>instanceof</code> because it works through <code>iframes</code>.
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray#instanceof_vs_isArray">See the MDN section/example</a></p>
</blockquote>

<p>Or if you prefer the MIT explanation:</p>

<blockquote>
<p>[…] by the semantics of <code>instanceof</code>, <code>o instanceof Array</code> works correctly only if <code>o</code> is an array created by that page&rsquo;s original <code>Array</code> constructor (or, equivalently, by use of an array literal in that page).</p>

<p>See <a href="http://web.mit.edu/jwalden/www/isArray.html">Determining with absolute accuracy whether or not a JavaScript object is an array</a></p>
</blockquote>

<p>In plain English:</p>

<p>In JavaScript, the Array constructor/prototype is not shared across windows/iframes. Therefore <code>instanceof Array</code> works, but only if you’re never going to share <code>Array</code>s across windows/iframes, since at that point, they won’t have the same constructor/prototype.</p>

<h2 id="implementation-options">Implementation options</h2>

<p>There’s a full set of implementation attempts and their tabulated output at <a href="https://beta.observablehq.com/@hugodf/array-isarray-implementations">https://beta.observablehq.com/@hugodf/array-isarray-implementations</a>.</p>

<p>We take some of the approaches from <a href="http://web.mit.edu/jwalden/www/isArray.html">“Determining with absolute accuracy whether or not a JavaScript object is an array”</a> plus the official MDN polyfill for a spin.</p>

<h3 id="the-official-polyfill">The official polyfill</h3>

<p>See the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray#Polyfill">MDN docs</a> or check it out <a href="https://beta.observablehq.com/@hugodf/array-isarray-implementations#isArrayMdnOfficial">in the Observable notebook</a>:</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">isArrayMdnOfficial</span><span class="p">(</span><span class="nx">objToCheck</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">objToCheck</span><span class="p">)</span> <span class="o">===</span> <span class="s1">&#39;[object Array]&#39;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>This 100% works but feels a bit dirty, the only thing to be weary of is:</p>

<blockquote>
<p>“<code>Object.prototype.toString</code> and <code>Function.prototype.call</code> not being changed
(probably a good assumption but still fragile)”</p>

<p>&ndash; J Walden - <a href="http://web.mit.edu/jwalden/www/isArray.html">Determining with absolute accuracy whether or not a JavaScript object is an array</a></p>
</blockquote>

<p>This hack is the only way to do this check properly, as we will see.</p>

<h3 id="the-duck-typing-approach">The duck-typing approach</h3>

<p>The duck-typing approach, if it behaves like an Array, then it’s an Array, ie. see if stuff we could expect on an Array to be there.</p>

<p>This could be pushed to an extreme and check for every Array method.</p>

<p>Positive: anything that behaves like an Array would work.</p>

<p>Negative: anything that behaves like an Array would work.</p>

<p>In Computer Science-speak: anything implementing the JavaScript Array interface (or a subset that we’re actually testing for) would work.</p>

<p>Final negative that means we’re not going to use this: it’s ugly, doesn’t scale… And we’ve got native <code>Array.isArray</code> which pretends like it’s a clean function when actually it just <code>toString</code>-s stuff.</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">isArrayLengthAndPushCheck</span><span class="p">(</span><span class="nx">objToCheck</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Boolean</span><span class="p">(</span><span class="nx">objToCheck</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">objToCheck</span><span class="p">.</span><span class="nx">length</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">objToCheck</span><span class="p">.</span><span class="nx">push</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="checking-the-prototype-constructor-instance-type">Checking the prototype/constructor/instance type</h3>

<p>We get the following two functions.</p>

<p>Check the constructor</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">isArrayConstructor</span><span class="p">(</span><span class="nx">objToCheck</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Boolean</span><span class="p">(</span><span class="nx">objToCheck</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">objToCheck</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">===</span> <span class="nb">Array</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Use <code>instanceof</code></p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">isArrayInstanceOf</span><span class="p">(</span><span class="nx">objToCheck</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">objToCheck</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Here’s the ugly output table for these:</p>

<table>
<thead>
<tr>
<th>Label</th>
<th><code>Array.isArray</code></th>
<th>isArrayConstructor</th>
<th>isArrayInstanceOf</th>
</tr>
</thead>

<tbody>
<tr>
<td>Empty Array</td>
<td>true</td>
<td>true</td>
<td>true</td>
</tr>

<tr>
<td>Array of Number literal</td>
<td>true</td>
<td>true</td>
<td>true</td>
</tr>

<tr>
<td>Array of String literal</td>
<td>true</td>
<td>true</td>
<td>true</td>
</tr>

<tr>
<td>Array (using constructor.from)</td>
<td>true</td>
<td>true</td>
<td>true</td>
</tr>

<tr>
<td>Array with empty values using constructor</td>
<td>true</td>
<td>true</td>
<td>true</td>
</tr>

<tr>
<td>Array with values using constructor</td>
<td>true</td>
<td>true</td>
<td>true</td>
</tr>

<tr>
<td>Array prototype</td>
<td>true</td>
<td>true</td>
<td>false</td>
</tr>

<tr>
<td>Array from other window</td>
<td>true</td>
<td>false</td>
<td>false</td>
</tr>

<tr>
<td>Object whose <code>__prototype__</code> is Array</td>
<td>false</td>
<td>true</td>
<td>true</td>
</tr>

<tr>
<td>Object with nested Array</td>
<td>false</td>
<td>false</td>
<td>false</td>
</tr>
</tbody>
</table>

<p>These all fail the test when an Array is from another window and <code>Object</code>s masquerading as <code>Array</code>s. The <code>instanceof</code> approach also fails on the constructor (which <em>is</em> an Array) since it’s not an instance of itself.</p>

<p>That&rsquo;s why MDN predicates using the polyfill which uses the nasty <code>toString</code> call.</p>

<p>For more JavaScript nasties 🍬 and spicies 🌶:</p>

<p><a href="https://buttondown.email/hugo">Subscribe to the Code with Hugo newsletter</a>.</p>

<h2 id="array-vs-object-application">Array vs Object: application</h2>

<p>Let’s say we want to measure the depth of we have an object with mixed nested arrays/objects like so:</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="k">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">myKey</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">nest</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">doubleNested</span><span class="o">:</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span>
      <span class="nx">nestedArray</span><span class="o">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nx">key</span><span class="o">:</span> <span class="s1">&#39;value&#39;</span> <span class="p">}</span> <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div>
<p>The difficulty lies in detecting whether we should treat the value as an object (dictionary) or as a list.</p>

<p>To break down object vs primitive type detection, it’s a case of <code>typeof obj === 'object'</code>, see this quick reminder of types of things:</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="k">typeof</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;string&#39;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="k">typeof</span> <span class="k">new</span> <span class="nb">String</span><span class="p">(),</span> <span class="s1">&#39;string&#39;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="k">typeof</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;number&#39;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="k">typeof</span> <span class="kc">Infinity</span><span class="p">,</span> <span class="s1">&#39;number&#39;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="k">typeof</span> <span class="kc">NaN</span><span class="p">,</span> <span class="s1">&#39;number&#39;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="k">typeof</span> <span class="kc">undefined</span><span class="p">,</span> <span class="s1">&#39;undefined&#39;</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="k">typeof</span> <span class="p">[],</span> <span class="s1">&#39;object&#39;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="k">typeof</span> <span class="kc">null</span><span class="p">,</span> <span class="s1">&#39;object&#39;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="k">typeof</span> <span class="p">{},</span> <span class="s1">&#39;object&#39;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="k">typeof</span> <span class="k">new</span> <span class="nx">Map</span><span class="p">(),</span> <span class="s1">&#39;object&#39;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="k">typeof</span> <span class="k">new</span> <span class="nx">Set</span><span class="p">(),</span> <span class="s1">&#39;object&#39;</span><span class="p">);</span>
</code></pre></div>
<p>Now to separate Objects vs Arrays it’s <code>Array.isArray</code> every day (<a href="#arrayisarray-behaviour-with-different-types">see above</a>):</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// Console.assert flips out again
</span><span class="c1">// even though the assertions hold
</span><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">({}),</span> <span class="kc">false</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="k">new</span> <span class="nx">Map</span><span class="p">()),</span> <span class="kc">false</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="k">new</span> <span class="nx">Set</span><span class="p">()),</span> <span class="kc">false</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">([]),</span> <span class="kc">true</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="k">new</span> <span class="nb">Array</span><span class="p">()),</span> <span class="kc">true</span><span class="p">);</span>
</code></pre></div>
<p>That means we should be able to implement <code>maxDepth</code> as:</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">maxDepth</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">depth</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">obj</span> <span class="o">!==</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">depth</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">const</span> <span class="p">[</span><span class="nx">values</span><span class="p">,</span> <span class="nx">depthIncrease</span><span class="p">]</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span>
    <span class="o">?</span> <span class="p">[</span><span class="nx">obj</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
    <span class="o">:</span> <span class="p">[</span><span class="nb">Object</span><span class="p">.</span><span class="nx">values</span><span class="p">(</span><span class="nx">obj</span><span class="p">),</span> <span class="mi">1</span><span class="p">];</span>
  <span class="k">return</span> <span class="nx">values</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(...</span><span class="nx">values</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span>
      <span class="nx">value</span> <span class="p">=&gt;</span> <span class="nx">maxDepth</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">depth</span> <span class="o">+</span> <span class="nx">depthIncrease</span><span class="p">))</span>
    <span class="p">)</span>
    <span class="o">:</span> <span class="nx">depth</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Some of these fail even though the assertions hold 🙄:</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="nx">maxDepth</span><span class="p">({}),</span> <span class="mi">0</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="nx">maxDepth</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="nx">maxDepth</span><span class="p">([</span> <span class="p">{</span> <span class="nx">one</span><span class="o">:</span> <span class="s1">&#39;deep&#39;</span> <span class="p">}</span> <span class="p">]),</span> <span class="mi">1</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="nx">maxDepth</span><span class="p">({</span> <span class="nx">one</span><span class="o">:</span> <span class="s1">&#39;deep&#39;</span> <span class="p">}),</span> <span class="mi">1</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="nx">maxDepth</span><span class="p">({</span> <span class="nx">one</span><span class="o">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nx">two</span><span class="o">:</span> <span class="s1">&#39;deep&#39;</span> <span class="p">}</span> <span class="p">]</span> <span class="p">}),</span> <span class="mi">2</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="nx">maxDepth</span><span class="p">({</span> <span class="nx">one</span><span class="o">:</span> <span class="p">{</span> <span class="nx">two</span><span class="o">:</span> <span class="s1">&#39;deep&#39;</span> <span class="p">}</span> <span class="p">}),</span> <span class="mi">2</span><span class="p">)</span>
</code></pre></div>
<p>There we go: a practical application of Array.isArray</p>

<p><a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &quot;San Francisco&quot;, &quot;Helvetica Neue&quot;, Helvetica, Ubuntu, Roboto, Noto, &quot;Segoe UI&quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px" href="https://unsplash.com/@joshstyle?utm_medium=referral&amp;utm_campaign=photographer-credit&amp;utm_content=creditBadge" target="_blank" rel="noopener noreferrer" title="Download free do whatever you want high-resolution photos from JOSHUA COLEMAN"><span style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg" style="height:12px;width:auto;position:relative;vertical-align:middle;top:-1px;fill:white" viewBox="0 0 32 32"><title>unsplash-logo</title><path d="M20.8 18.1c0 2.7-2.2 4.8-4.8 4.8s-4.8-2.1-4.8-4.8c0-2.7 2.2-4.8 4.8-4.8 2.7.1 4.8 2.2 4.8 4.8zm11.2-7.4v14.9c0 2.3-1.9 4.3-4.3 4.3h-23.4c-2.4 0-4.3-1.9-4.3-4.3v-15c0-2.3 1.9-4.3 4.3-4.3h3.7l.8-2.3c.4-1.1 1.7-2 2.9-2h8.6c1.2 0 2.5.9 2.9 2l.8 2.4h3.7c2.4 0 4.3 1.9 4.3 4.3zm-8.6 7.5c0-4.1-3.3-7.5-7.5-7.5-4.1 0-7.5 3.4-7.5 7.5s3.3 7.5 7.5 7.5c4.2-.1 7.5-3.4 7.5-7.5z"></path></svg></span><span style="display:inline-block;padding:2px 3px">JOSHUA COLEMAN</span></a></p>
        </div>
    </section>

    <section class="subscribe-form">
        <h3 class="subscribe-form-title">Subscribe to Code with Hugo</h3>
        <p>Get all the posts of the week before anyone else in your inbox</p>
        <form
            action="https://buttondown.email/api/emails/embed-subscribe/hugo"
            method="post"
            target="popupwindow"
            onsubmit="window.open('https://buttondown.email/hugo', 'popupwindow')"
        >
            <div class="form-group">
                <input class="subscribe-email" type="email" name="email" id="bd-email" placeholder="youremail@example.com">
                <input type="hidden" value="1" name="embed"/>
            </div>
            <button class="" value="Subscribe" type="submit"><span>Subscribe</span></button>
        </form>
    </section>

    <footer class="post-full-footer">
      <section class="author-card">
        <img class="author-profile-image" src="https://cdn-images-1.medium.com/fit/c/200/200/0*Rb-aDjpTtV1UZA4O.jpeg" alt="Author" />
        <section class="author-card-content">
            <h4 class="author-card-name"><a href="https://codewithhugo.com/">Hugo Di Francesco</a></h4>
                <p>A developer, working out of London writing CSS, JavaScript and Python.</p>
        </section>
      </section>
    </footer>
</article>


  <section class="overlay-cta">
    <div class="overlay-cta__inner">
      <div class="overlay-cta__text-container">
        <h3 class="cta-title overlay-cta__title">
          Subscribe to the Code with Hugo newsletter
        </h3>
        <p class="cta-text overlay-cta__text">
          Get the latest articles in your inbox every 2 weeks
        </p>
      </div>
      <div class="overlay-cta__button-container">
        <a href="https://buttondown.email/hugo" class="button overlay-cta__button">
          Subscribe
        </a>
        <a href="#" class="overlay-cta__close">close</a>
      </div>
    </div>
  </section>



    
    
    

  </div>
</main>


<aside class="read-next outer">
  <div class="inner">
    <div class="read-next-feed">      
      
<article class="read-next-card" 
            style="background-image: url(https://codewithhugo.com/img/cover.jpg);" >
    <header class="read-next-card-header">
        <small class="read-next-card-header-sitetitle">&mdash; Code with Hugo &mdash;</small>
        
        <h3 class="read-next-card-header-title"><a href="https://codewithhugo.com/tags/javascript/">#JavaScript</a></h3>
    </header>
    <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
    </div>

    <div class="read-next-card-content">
      
        <ul>
          <li><a href="https://codewithhugo.com/build-and-deploy-a-vue/react/vanilla-js-app-with-parcel-and-github-pages/">Build and deploy a Vue/React/Vanilla JS app with Parcel and GitHub pages</a></li>            
        
          <li><a href="https://codewithhugo.com/setting-up-express-and-redis-with-docker-compose/">Setting up Express and Redis with Docker compose</a></li>            
        
          <li><a href="https://codewithhugo.com/install-just-redis-cli-on-ubuntu-debian-jessie/">Install just redis-cli on Ubuntu, Debian, Jessie</a></li>            
        
          <li><a href="https://codewithhugo.com/how-components-won-the-framework-wars/">How components won the “framework wars”</a></li>            
        </ul>
    </div>
    <footer class="read-next-card-footer">
      
        <a href="https://codewithhugo.com/tags/javascript/">See all related posts →</a>
    </footer>
</article>


      
      <article class="post-card post"> 
    
    <a class="post-card-image-link" href="https://codewithhugo.com/avoiding-falsy-values-in-javascript-arrays/">
      <div class="post-card-image" style="background-image: url(https://codewithhugo.com/img/kaizen-nguy.jpg)"></div>
    </a>
    

    <div class="post-card-content">
      <a class="post-card-content-link" href="https://codewithhugo.com/avoiding-falsy-values-in-javascript-arrays/">
          <header class="post-card-header">
              <span class="post-card-tags">
              #JavaScript 
              #web development  </span>
              
              <h2 class="post-card-title">Avoid null/undefined in JavaScript arrays</h2>
          </header>
          <section class="post-card-excerpt">
              
                <p> How to avoid TypeError: Cannot read property ___ of undefined using Array.filter(Boolean)
 tl;dr: Array.filter(Boolean) filters out falsy values (null, undefined, 0, false, '') and avoids Cannot read property of undefined errors.

 ...  </p>
              
          </section>
      </a>

      <footer class="post-card-meta">
          <img class="author-profile-image" src="https://cdn-images-1.medium.com/fit/c/200/200/0*Rb-aDjpTtV1UZA4O.jpeg" alt="Author" />
          <span class="post-card-author"><a href="/">Hugo Di Francesco</a></span>
      </footer>
    </div>
</article>
      
      
      <article class="post-card post"> 
    
    <a class="post-card-image-link" href="https://codewithhugo.com/technical-content-workflow-for-code-with-hugo-static-site-paper-medium-dev-and-buttondown/">
      <div class="post-card-image" style="background-image: url(https://codewithhugo.com/img/christin-hume-unsplash.jpg)"></div>
    </a>
    

    <div class="post-card-content">
      <a class="post-card-content-link" href="https://codewithhugo.com/technical-content-workflow-for-code-with-hugo-static-site-paper-medium-dev-and-buttondown/">
          <header class="post-card-header">
              <span class="post-card-tags">
              #meta 
              #seo 
              #technical writing  </span>
              
              <h2 class="post-card-title">Technical content workflow for “Code with Hugo”: static site, Paper, Medium, DEV and Buttondown</h2>
          </header>
          <section class="post-card-excerpt">
              
                <p>tl;dr: here are the tools used to power, build and publish codewithhugo.com:
 Dropbox Paper because it syncs desktop/mobile and outputs to markdown Unsplash for cover images Edited Markdown + images → Hugo static site generator Casper 2 (https://ghost.org default theme) for Hugo Schedule:  Newsletter: Mondays 5pm UK every 2 weeks 1+ post a week  Cross-post to Medium (Stories → Import a Story) Cross-post to dev.to using RSS feed Social media/promotion &lt; Organic traffic Newsletter powered by https://buttondown. ...  </p>
              
          </section>
      </a>

      <footer class="post-card-meta">
          <img class="author-profile-image" src="https://cdn-images-1.medium.com/fit/c/200/200/0*Rb-aDjpTtV1UZA4O.jpeg" alt="Author" />
          <span class="post-card-author"><a href="/">Hugo Di Francesco</a></span>
      </footer>
    </div>
</article>
      
    </div>
  </div>
</aside>

<div class="floating-header">
  <div class="floating-header-logo">
    <a href="https://codewithhugo.com/">
      
      <span>Code with Hugo</span>
    </a>
  </div>
  <span class="floating-header-divider">&mdash;</span>
  <div class="floating-header-title">JavaScript “is array” in-depth</div>
  <div class="floating-header-share">
    <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
     <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/></svg>
    </div>

    
    <a class="floating-header-share-tw" href="https://twitter.com/share?text=%22JavaScript%20%e2%80%9cis%20array%e2%80%9d%20in-depth%22%20by%20%40hugo__df&amp;url=https%3a%2f%2fcodewithhugo.com%2fdetecting-object-vs-array-in-javascript-by-example%2f&amp"
          onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
      </a>
      <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fcodewithhugo.com%2fdetecting-object-vs-array-in-javascript-by-example%2f"
          onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>
      </a>
  </div>

  <progress class="progress" value="0">
    <div class="progress-container">
      <span class="progress-bar"></span>
    </div>
  </progress>
</div>



<footer class="site-footer outer">
  <div class="site-footer-content inner">
    <section class="copyright" style="line-height: 1.3em;">
      <a href="/">Code with Hugo</a>  <br>
      
    </section>
    <nav class="site-footer-nav">
        <a href="/">Latest Posts</a>
        
        <a href="https://twitter.com/hugo__df" target="_blank" rel="noopener">Twitter</a>
        <a href="https://github.com/HugoDF" target="_blank" rel="noopener">Github</a>
        
        <a href="https://medium.com/@hugo__df" target="_blank" rel="noopener">Medium</a>
    </nav>  
  </div>
</footer>

</div>

<script type="text/javascript" src="//code.jquery.com/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="https://codewithhugo.com/js/jquery.fitvids.js"></script>




  <!-- Google Analytics -->
  <script>
    var _gaq=[['_setAccount','UA-60469708-1'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
  </script>



<script async src="//cdn.simpleanalytics.io/hello.js"></script>
<noscript><img src="//api.simpleanalytics.io/hello.gif" alt=""></noscript>





<script>
  (function (document) {
    function getLastDocumentHeight(document) {
      var body = document.body;
      var html = document.documentElement;
      return Math.max(
        body.scrollHeight, body.offsetHeight,
        html.clientHeight, html.scrollHeight,
        html.offsetHeight
      );
    }

    var $overlay = document.querySelector('.overlay-cta');
    var hiddenClass = 'overlay-cta--hidden';
    var closedClass = 'overlay-cta--closed';
    $overlay.classList.add(hiddenClass);

    
    var $overlayClose = document.querySelector('.overlay-cta__close');
    var overlayCloseListener = $overlayClose.addEventListener('click', function (e) {
      e.preventDefault();
      $overlay.classList.add(closedClass);
    });

    var $heroCtaButton = document.querySelector('.hero-cta .button');
    var $firstContentItem = document.querySelector('.post-full-content > * > *');
    var title = $heroCtaButton || $firstContentItem;

    var $subscribeBox = document.querySelector('.subscribe-form');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = getLastDocumentHeight(document);
    var ticking = false;


    function onScroll() {
      lastScrollY = window.scrollY;
      requestTick();
    }

    function onResize() {
      lastWindowHeight = window.innerHeight;
      lastDocumentHeight = getLastDocumentHeight(document);
      requestTick();
    }

    function requestTick() {
      if (!ticking) {
        requestAnimationFrame(update);
      }
      ticking = true;
    }

    function update() {
      var trigger = title.getBoundingClientRect().top + window.scrollY;
      var triggerOffset = title.offsetHeight + 35;
      var lastShowCtaBoxHeight = $subscribeBox.getBoundingClientRect().top ;
      
      if (
        lastScrollY >= trigger + triggerOffset &&
        lastShowCtaBoxHeight > lastWindowHeight
      ) {
        $overlay.classList.remove(hiddenClass);
      } else {
        $overlay.classList.add(hiddenClass);
      }

      ticking = false;
    }

    window.addEventListener('scroll', onScroll, { passive: true });
    window.addEventListener('resize', onResize, false);

    update();
  })(document);
</script>


    <script>





$(document).ready(function () {
    
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>
</body></html>
