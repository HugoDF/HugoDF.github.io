<!DOCTYPE html>
<html lang="en-US" />
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="google-site-verification" content="gBfbdXRLofaOyHsbgiSiuCIHKPaviGMRVWh_qOfDHNE" />

    <title>Post Frequency: from prototype to production with Vue &#43; Node &middot; Code with Hugo</title>

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#00aba9">
    <meta name="theme-color" content="#090a0b">

    <link rel="shortcut icon" href="https://codewithhugo.com/favicon.ico" />
    <meta name="theme-color" content="#090a0b">
    
    <link rel="canonical" href="https://codewithhugo.com/post-frequency-from-prototype-to-production-with-vue---node/" /> 

     <meta name="description" content="&lt;blockquote&gt;
&lt;p&gt;If you want to ship, use the tools you know. — A lot of people&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Let&amp;rsquo;s apply that principle: I&amp;rsquo;m building &lt;a hre" /> 

     
    
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:image" content="https://codewithhugo.com/img/neonbrand-unsplash.jpg"/>
    
 
    <meta name="twitter:title" content="Post Frequency: from prototype to production with Vue &#43; Node"/>
    <meta name="twitter:description" content="&lt;blockquote&gt;
&lt;p&gt;If you want to ship, use the tools you know. — A lot of people&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Let&amp;rsquo;s apply that principle: I&amp;rsquo;m building &lt;a hre"/>
    <meta name="twitter:url" content="https://codewithhugo.com/post-frequency-from-prototype-to-production-with-vue---node/" />
    <meta name="twitter:site" content="@hugo__df"/>

    <meta property="og:site_name" content="Code with Hugo" />
    <meta property="og:title" content="Post Frequency: from prototype to production with Vue &#43; Node &middot; Code with Hugo" />
    <meta property="og:url" content="https://codewithhugo.com/post-frequency-from-prototype-to-production-with-vue---node/" />
    

    <meta property="og:type" content="article" />
    <meta property="og:description" content="&lt;blockquote&gt;
&lt;p&gt;If you want to ship, use the tools you know. — A lot of people&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Let&amp;rsquo;s apply that principle: I&amp;rsquo;m building &lt;a hre" />

    <meta property="article:published_time" content="2018-11-26T00:00:00Z" />
    <meta property="article:tag" content="JavaScript" /><meta property="article:tag" content="vue" /><meta property="article:tag" content="node" />

    <meta property="og:image" content="https://codewithhugo.com/img/neonbrand-unsplash.jpg"/>


    <meta name="generator" content="Hugo 0.46" />

    <!-- Stylesheets -->
    <link rel="stylesheet" type="text/css" href="https://codewithhugo.com/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="https://codewithhugo.com/css/casper-two.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" />
    
      
      <link rel="stylesheet" href="https://codewithhugo.com/overrides.min.bd35cf74c58c56c4aa8eff40730357744dec20ff31d8bae7b0618dbe30e0dbe4.css">
    
      
      <link rel="stylesheet" href="https://codewithhugo.com/syntax.min.e1646a3f88f77e1b5e7d0253633b1958013aa132890dfe4d7e15dc4718d4aecc.css">
    
      
      <link rel="stylesheet" href="https://codewithhugo.com/cta.min.612120dbcad38a206f6cc18996cd1f7d45141911bf04c86ab0c6132a55274b7b.css">
    

    

     
</head>


<body class="post-template">
  <div class="site-wrapper"> 

<header class="site-header outer">
  <div class="inner">
    <nav class="site-nav">
      <div class="site-nav-left">

        <ul class="nav" role="menu">
        
        
        
            <li class="" role="menuitem">
              <a href="/">Home</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/guides/">guides</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/tags/javascript/">JavaScript</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/tags/node/">Node</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/tags/sequelize/">Sequelize</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/open/">#open</a>
            </li>
        
      </ul></div>

      <div class="site-nav-right">
        <div class="social-links">
                    

                    <a class="social-link social-link-tw" href="https://twitter.com/hugo__df" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg></a>

                    <a class="social-link" href="https://github.com/HugoDF" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a>

                    

                    <a class="social-link" href="https://medium.com/@hugo__df" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 195 195"><path d="M46.5340803,65.2157554 C46.6968378,63.6076572 46.0836,62.018231 44.8828198,60.93592 L32.6512605,46.2010582 L32.6512605,44 L70.6302521,44 L99.9859944,108.380952 L125.794585,44 L162,44 L162,46.2010582 L151.542017,56.2281011 C150.640424,56.9153477 150.193188,58.0448862 150.380019,59.1628454 L150.380019,132.837155 C150.193188,133.955114 150.640424,135.084652 151.542017,135.771899 L161.755369,145.798942 L161.755369,148 L110.38282,148 L110.38282,145.798942 L120.963119,135.527337 C122.002801,134.487948 122.002801,134.182246 122.002801,132.592593 L122.002801,73.0417402 L92.585901,147.755438 L88.6106443,147.755438 L54.3622782,73.0417402 L54.3622782,123.115814 C54.0767278,125.221069 54.7759199,127.3406 56.2581699,128.863022 L70.0186741,145.55438 L70.0186741,147.755438 L31,147.755438 L31,145.55438 L44.7605042,128.863022 C46.2319621,127.338076 46.8903838,125.204485 46.5340803,123.115814 L46.5340803,65.2157554 Z"/></svg></a>
        </div>  
        
        <a class="subscribe-button" href="https://codewithhugo.com/index.xml">Subscribe</a>
            
      </div>

    </nav>  

  </div>
</header>

<main id="site-main" class="site-main outer" role="main">
  <div class="inner">
    
      
<div id="codefund_ad"></div>


<article class="post-full post">
    <header class="post-full-header">
        <section class="post-full-meta">
            <time class="post-full-meta-date" datetime="2018-11-26">26 November 2018</time>
                <span class="date-divider">/</span> <a href="https://codewithhugo.com/tags/javascript/">#JavaScript</a>&nbsp;<a href="https://codewithhugo.com/tags/vue/">#vue</a>&nbsp;
        </section>
        <h1 class="post-full-title">Post Frequency: from prototype to production with Vue &#43; Node</h1>
    </header>
    <div class="hero-container">

      
      <figure class="post-full-image" style="background-image: url(https://codewithhugo.com/img/neonbrand-unsplash.jpg)">
        

      </figure>
    </div>

    <section class="post-full-content">
        <div class="kg-card-markdown">
        <blockquote>
<p>If you want to ship, use the tools you know. — A lot of people</p>
</blockquote>

<p>Let&rsquo;s apply that principle: I&rsquo;m building <a href="https://accountableblogging.com">Post Frequency/Accountable Blogging</a>,
I&rsquo;m familiar with Vue and Node-based backends. Netlify makes frontend deployments trivial and
I’ve settled on Dokku for databases/backend applications hosting.
</p>

<p>See how I deploy my applications <a href="https://codewithhugo.com/deployment-options-netlify---dokku-on-digitalocean-vs-now.sh-github-pages-heroku-and-aws/">Deployment options: Netlify + Dokku on DigitalOcean vs now.sh, GitHub Pages, Heroku and AWS</a>.</p>

<p>Table of contents:</p>

<ul>
<li><p><a href="#context">Context</a></p></li>

<li><p><a href="#frontend">Frontend</a></p>

<ul>
<li><p><a href="#vue--vue-cli-3">Vue + Vue CLI 3</a></p></li>

<li><p><a href="#vue-cli-prerender-spa-plugin">Vue CLI prerender SPA plugin</a></p></li>

<li><p><a href="#load-some-scripts-only-on-production">Load some scripts only on production</a></p></li>

<li><p><a href="#load-scripts-only-if-not-pre-rendering-injectx-using">Load scripts only if <em>not</em> pre-rendering <code>injectX</code> using:</a></p></li>
</ul></li>

<li><p><a href="#pass-service-urls-using-envenvironment-files">Pass service URLs using <code>.env.${ENVIRONMENT}</code> files</a></p></li>

<li><p><a href="#being-social-and-google-friendly">Being social and Google-friendly</a></p>

<ul>
<li><a href="#be-crawlable">Be crawlable</a></li>
<li><a href="#favicons-and-manifests">Favicons and manifests</a></li>
<li><a href="#meta-description-opengraph-tags">Meta description, OpenGraph tags</a>

<ul>
<li><a href="#without-router">Without router</a></li>
<li><a href="#with-vue-router">With vue-router</a></li>
</ul></li>
</ul></li>

<li><p><a href="#backend-services">Backend service(s)</a></p></li>

<li><p><a href="#launch">Launch</a></p></li>

<li><p><a href="#outcomes">Outcomes</a></p></li>
</ul>

<h2 id="context">Context</h2>

<p>Accountable Blogging was always going to be a single-ish page application, initially the backend was going to be Netlify lambdas… when I hit some issues with that I just went back to what I know, setting up Dokku to deploy some backend services.</p>

<p>Since my lambdas were already written, I went for <code>micro</code> (see  <a href="https://codewithhugo.com/simple-but-not-too-simple-how-using-zeits-micro-improves-your-node-applications/">Simple but not too simple: how using Zeit&rsquo;s micro improves your Node applications</a>) instead of Express. In <a href="https://codewithhugo.com/simple-but-not-too-simple-how-using-zeits-micro-improves-your-node-applications/">this other post</a>, I go into more detail about why I did this, in short: it&rsquo;s lighter and requires less boilerplate/helper packages to get a single POST endpoint up and running.</p>

<h2 id="frontend">Frontend</h2>

<h3 id="vue-vue-cli-3">Vue + Vue CLI 3</h3>

<p>I&rsquo;m a big fan of Vue. It&rsquo;s simple, it has good docs, it&rsquo;s easy to write.</p>

<p>I had never really tried the Vue CLI. Just like the rest of the official Vue packages and ecosytem, it&rsquo;s got super nice ergonomics (eg. a plugin system, a local UI, hot module reloading that works).</p>

<h3 id="vue-cli-prerender-spa-plugin">Vue CLI prerender SPA plugin</h3>

<p>To have indexable HTML with our SPA, we can leverage <a href="https://www.npmjs.com/package/vue-cli-plugin-prerender-spa">vue-cli-plugin-prerender-spa</a>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="c1"># if you have vue-cli globally installed
</span><span class="c1"></span>vue add prerender-spa
<span class="c1"># if you have it only locally installed
</span><span class="c1"></span>npx vue add prerender-spa</code></pre></div>
<h3 id="load-some-scripts-only-on-production">Load some scripts only on production</h3>

<p>There are situations where you only want to load some scripts on production.</p>

<p>Here&rsquo;s how to do it, with the example of the <a href="https://crisp.chat">crisp.chat</a> JavaScript SDK (it’s slow to load and doesn&rsquo;t make sense to use locally) <code>public/index.html</code> (using EJS templating I believe):</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span><span class="p">&gt;</span>
  <span class="nb">window</span><span class="p">.</span><span class="nx">$crisp</span><span class="o">=</span><span class="p">[];</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="err">&lt;</span>% if (NODE_ENV === &#39;production&#39;) { %&gt;
    window.CRISP_WEBSITE_ID=&#34;SOME_ID&#34;;
    (function(){d=document;s=d.createElement(&#34;script&#34;);s.src=&#34;https://client.crisp.chat/l.js&#34;;s.async=1;d.getElementsByTagName(&#34;head&#34;)[0].appendChild(s);})();
  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="err">&lt;</span>% } %&gt;</code></pre></div>
<p>This <code>&lt;% if (NODE_ENV === 'production') { %&gt;</code> and the matching <code>&lt;% } %&gt;</code> exclude rendering the particular script in dev.</p>

<h3 id="load-scripts-only-if-not-pre-rendering-injectx-using">Load scripts only if <em>not</em> pre-rendering <code>injectX</code> using:</h3>

<p>Sometimes you want to conditionally load things when <em>not</em> pre-rendering. This can be achieved using <code>window.__PRERENDER_INJECTED</code> (which is a variable set by pre-render-SPA).</p>

<p>It looks like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">window</span><span class="p">.</span><span class="nx">__PRERENDER_INJECTED</span> <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">__PRERENDER_INJECTED</span> <span class="o">!==</span> <span class="s1">&#39;PRERENDERING&#39;</span><span class="p">){</span>
  <span class="c1">// init stuff
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div>
<p>You need the following in <code>.prerender-spa.json</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;customRendererConfig&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;inject&#34;</span><span class="p">:</span> <span class="s2">&#34;PRERENDERING&#34;</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<p>The full example would therefore be:</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span><span class="p">&gt;</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">$crisp</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">CRISP_WEBSITE_ID</span><span class="o">=</span><span class="s2">&#34;SOME_ID&#34;</span><span class="p">;</span>
  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="err">&lt;</span>% if (NODE_ENV === &#39;production&#39;) { %&gt;
  <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">window</span><span class="p">.</span><span class="nx">__PRERENDER_INJECTED</span> <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">__PRERENDER_INJECTED</span> <span class="o">!==</span> <span class="s1">&#39;PRERENDERING&#39;</span><span class="p">){</span>
      <span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">d</span><span class="o">=</span><span class="nb">document</span><span class="p">;</span><span class="nx">s</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&#34;script&#34;</span><span class="p">);</span><span class="nx">s</span><span class="p">.</span><span class="nx">src</span><span class="o">=</span><span class="s2">&#34;https://client.crisp.chat/l.js&#34;</span><span class="p">;</span><span class="nx">s</span><span class="p">.</span><span class="kr">async</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="nx">d</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&#34;head&#34;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">s</span><span class="p">);})();</span>
    <span class="p">}</span>
  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="err">&lt;</span>% } %&gt;</code></pre></div>
<h2 id="pass-service-urls-using-env-environment-files">Pass service URLs using <code>.env.${ENVIRONMENT}</code> files</h2>

<p>You probably want to hit a local version of your backend services when developing and obviously the live one when in production, here&rsquo;s how you do that with <code>.env</code> files
<code>.env.development</code>:</p>

<pre><code>VUE_APP_FEED_SERVICE_URL=http://localhost:1234
</code></pre>

<p><code>.env.production</code>:</p>

<pre><code>VUE_APP_FEED_SERVICE_URL=https://my-live-service.accoutableblogging.com
</code></pre>

<p>In your application code you can then access it under <code>process.env.VUE_APP_FEED_SERVICE_URL</code> for example:</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="k">const</span> <span class="nx">FEED_SERVICE_URL</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">VUE_APP_FEED_SERVICE_URL</span><span class="p">;</span>
<span class="k">export</span> <span class="k">const</span> <span class="nx">FEED_DATA_URL</span> <span class="o">=</span> <span class="sb">`</span><span class="si">${</span><span class="nx">FEED_SERVICE_URL</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</code></pre></div>
<h2 id="being-social-and-google-friendly">Being social and Google-friendly</h2>

<h3 id="be-crawlable">Be crawlable</h3>

<p>As a good internet citizen, we should be readable without JavaScript enabled. Since we&rsquo;re leveraging Vue/vue-cli/vue-router we should probably pre-render (see <a href="#vue-cli-prerender-spa-plugin">Vue CLI prerender SPA plugin</a> section).</p>

<p>What would be even nicer would be a <code>sitemap.xml</code> that you can submit to Google Webmaster tools, I haven&rsquo;t found a nice solution yet but if/when I do you can be sure I&rsquo;ll share it so <a href="https://buttondown.email/hugo">subscribe to my newsletter</a>.</p>

<h3 id="favicons-and-manifests">Favicons and manifests</h3>

<p>Get your assets from <a href="https://realfavicongenerator.net/">realfavicongenerator.net</a>.</p>

<p>The end of the process on there is a download of a zip folder and some tags that you can copy.</p>

<p>Unzip the favicons and dump them in the <code>public</code> folder and add the tags to the <code>head</code> of the <code>public/index.html</code> file.</p>

<h3 id="meta-description-opengraph-tags">Meta description, OpenGraph tags</h3>

<p>Create your assets with <a href="https://realfavicongenerator.net/social/">realfavicongenerator.net/social</a> or <a href="https://metatags.io/">metatags.io</a>.</p>

<p>Here&rsquo;s a fun gotcha: resources (URLs) in <code>og</code> tags need to be an absolute URL.</p>

<h4 id="without-router">Without router</h4>

<p>ie. you have an app that is a single page 🙂, then just add your tags to <code>public/index.html</code>.</p>

<h4 id="with-vue-router">With vue-router</h4>

<p>I used <a href="https://alligator.io/vuejs/vue-router-modify-head/">this article</a>, and you should <a href="https://buttondown.email/hugo">subscribe to the newsletter</a>, for next week&rsquo;s article if you want the breakdown of how I&rsquo;ve set it up.</p>

<h2 id="backend-service-s">Backend service(s)</h2>

<p>Have a <code>src/services</code> folder where anything backend will live, say you have a <code>some-service</code> service.</p>

<p>My process starts with a directory <code>src/services/some-service</code> that contains an Express or micro app (see <a href="https://codewithhugo.com/simple-but-not-too-simple-how-using-zeits-micro-improves-your-node-applications/">this article about how I set up my micro app</a>).</p>

<p>For each service, we&rsquo;ll create a git remote to Dokku (or Heroku or whatever other git-based method you’re using):</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">git remote add dokku-service dokku@<span class="si">${</span><span class="nv">DOKKU_INSTANCE_IP</span><span class="si">}</span>:some-service<span class="sb">`</span></code></pre></div>
<p>Deploying to Dokku from the project root (where the top-level <code>package.json</code> is), can be done with:</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">git subtree push --prefix src/services/some-service dokku-service master</code></pre></div>
<p>If you would like to deploy using <code>npm run deploy:service</code>, you can put the following into the top-level <code>package.json</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;scripts&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;deploy:service&#34;</span><span class="p">:</span> <span class="s2">&#34;git subtree push --prefix src/services/some-service dokku-service master&#34;</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<h2 id="launch">Launch</h2>

<p>My launch was moderately successful, it started with an <a href="https://indiehackers.com">IndieHackers</a> post: <a href="https://www.indiehackers.com/forum/show-ih-a-github-style-graph-for-your-blog-da74a24d42">Show IH: A GitHub-style graph for your blog</a> and a <a href="https://dev.to">dev.to</a> post: <a href="https://dev.to/hugo__df/github-style-contribution-graph-for-your-blog-78f">GitHub-style contribution graph for your blog</a>.</p>

<p>Those two combined got me some traffic (90 referrals from IndieHackers and 60 from dev.to), see:</p>

<p><img src="https://i.imgur.com/iqfFJWP.png" alt="accountableblogging.com 23/10 to 30/10 page views graph" /></p>

<p>The ProductHunt launch went relatively well as well, <a href="https://www.producthunt.com/posts/post-frequency">see Post Frequency on ProductHunt</a>. It got onto the front page (I reckon Ryan Hoover had something to do with that 😉) and got 100+ upvotes. This is more of a &ldquo;check out this thing I made&rdquo;, rather than a full-blown product so it&rsquo;s not bad. Around 250 people checked it out from that (direct referrals from ProductHunt). The thing with ProductHunt is that other tools read data from there and syndicate it so you also see a trickle of other traffic, see the following graph:</p>

<p><img src="https://i.imgur.com/AP27VWy.png" alt="accountableblogging.com 29/10 to 23/11 page views graph" /></p>

<h2 id="outcomes">Outcomes</h2>

<p>I&rsquo;ve currently got 18 email signups, if you&rsquo;re interested you can sign up too: <a href="https://accountableblogging.com">accountableblogging.com</a>.</p>

<p>I&rsquo;ve created a little email + survey people can take using Typeform, you&rsquo;ll receive it if you sign up.</p>

<p>Next steps are to build the thing out. It&rsquo;s simple: give me your URL + payment details, I track how much you publish, you meet your goal or pay.</p>

<p><a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &quot;San Francisco&quot;, &quot;Helvetica Neue&quot;, Helvetica, Ubuntu, Roboto, Noto, &quot;Segoe UI&quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px" href="https://unsplash.com/@neonbrand?utm_medium=referral&amp;utm_campaign=photographer-credit&amp;utm_content=creditBadge" target="_blank" rel="noopener noreferrer" title="Download free do whatever you want high-resolution photos from NeONBRAND"><span style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg" style="height:12px;width:auto;position:relative;vertical-align:middle;top:-1px;fill:white" viewBox="0 0 32 32"><title>unsplash-logo</title><path d="M20.8 18.1c0 2.7-2.2 4.8-4.8 4.8s-4.8-2.1-4.8-4.8c0-2.7 2.2-4.8 4.8-4.8 2.7.1 4.8 2.2 4.8 4.8zm11.2-7.4v14.9c0 2.3-1.9 4.3-4.3 4.3h-23.4c-2.4 0-4.3-1.9-4.3-4.3v-15c0-2.3 1.9-4.3 4.3-4.3h3.7l.8-2.3c.4-1.1 1.7-2 2.9-2h8.6c1.2 0 2.5.9 2.9 2l.8 2.4h3.7c2.4 0 4.3 1.9 4.3 4.3zm-8.6 7.5c0-4.1-3.3-7.5-7.5-7.5-4.1 0-7.5 3.4-7.5 7.5s3.3 7.5 7.5 7.5c4.2-.1 7.5-3.4 7.5-7.5z"></path></svg></span><span style="display:inline-block;padding:2px 3px">NeONBRAND</span></a></p>
        </div>
    </section>

    <section class="subscribe-form">
        <h3 class="subscribe-form-title">Subscribe to Code with Hugo</h3>
        <p>Get all the posts of the week before anyone else in your inbox</p>
        <form
            action="https://buttondown.email/api/emails/embed-subscribe/hugo"
            method="post"
            target="popupwindow"
            onsubmit="window.open('https://buttondown.email/hugo', 'popupwindow')"
        >
            <div class="form-group">
                <input class="subscribe-email" type="email" name="email" id="bd-email" placeholder="youremail@example.com">
                <input type="hidden" value="1" name="embed"/>
            </div>
            <button class="" value="Subscribe" type="submit"><span>Subscribe</span></button>
        </form>
    </section>

    <footer class="post-full-footer">
      <section class="author-card">
        <img class="author-profile-image" src="https://cdn-images-1.medium.com/fit/c/200/200/0*Rb-aDjpTtV1UZA4O.jpeg" alt="Author" />
        <section class="author-card-content">
            <h4 class="author-card-name"><a href="https://codewithhugo.com/">Hugo Di Francesco</a></h4>
                <p>A developer, working out of London writing CSS, JavaScript and Python.</p>
        </section>
      </section>
    </footer>
</article>


  <section class="overlay-cta">
    <div class="overlay-cta__inner">
      <div class="overlay-cta__text-container">
        <h3 class="cta-title overlay-cta__title">
          Subscribe to the Code with Hugo newsletter
        </h3>
        <p class="cta-text overlay-cta__text">
          Get the latest articles in your inbox every 2 weeks
        </p>
      </div>
      <div class="overlay-cta__button-container">
        <a href="https://buttondown.email/hugo" class="button overlay-cta__button">
          Subscribe
        </a>
        <a href="#" class="overlay-cta__close">close</a>
      </div>
    </div>
  </section>



    
    
    

  </div>
</main>


<aside class="read-next outer">
  <div class="inner">
    <div class="read-next-feed">      
      
<article class="read-next-card" 
            style="background-image: url(https://codewithhugo.com/img/cover.jpg);" >
    <header class="read-next-card-header">
        <small class="read-next-card-header-sitetitle">&mdash; Code with Hugo &mdash;</small>
        
        <h3 class="read-next-card-header-title"><a href="https://codewithhugo.com/tags/javascript/">#JavaScript</a></h3>
    </header>
    <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
    </div>

    <div class="read-next-card-content">
      
        <ul>
          <li><a href="https://codewithhugo.com/6-months-of-code-with-hugo-in-numbers/">6 months of Code with Hugo, in numbers</a></li>            
        
          <li><a href="https://codewithhugo.com/just-enough-bash-to-be-dangerous/">Just enough bash to be dangerous</a></li>            
        
          <li><a href="https://codewithhugo.com/deploy-to-multiple-environments-with-git-and-circleci/">Deploy to multiple environments with git and CircleCI</a></li>            
        
          <li><a href="https://codewithhugo.com/why-css-is-hard/">Why CSS is hard</a></li>            
        </ul>
    </div>
    <footer class="read-next-card-footer">
      
        <a href="https://codewithhugo.com/tags/javascript/">See all related posts →</a>
    </footer>
</article>


      
      <article class="post-card post"> 
    
    <a class="post-card-image-link" href="https://codewithhugo.com/technical-content-workflow-for-code-with-hugo-static-site-paper-medium-dev-and-buttondown/">
      <div class="post-card-image" style="background-image: url(https://codewithhugo.com/img/christin-hume-unsplash.jpg)"></div>
    </a>
    

    <div class="post-card-content">
      <a class="post-card-content-link" href="https://codewithhugo.com/technical-content-workflow-for-code-with-hugo-static-site-paper-medium-dev-and-buttondown/">
          <header class="post-card-header">
              <span class="post-card-tags">
              #meta 
              #seo 
              #technical writing  </span>
              
              <h2 class="post-card-title">Technical content workflow for “Code with Hugo”: static site, Paper, Medium, DEV and Buttondown</h2>
          </header>
          <section class="post-card-excerpt">
              
                <p>tl;dr: here are the tools used to power, build and publish codewithhugo.com:
 Dropbox Paper because it syncs desktop/mobile and outputs to markdown Unsplash for cover images Edited Markdown + images → Hugo static site generator Casper 2 (https://ghost.org default theme) for Hugo Schedule:  Newsletter: Mondays 5pm UK every 2 weeks 1+ post a week  Cross-post to Medium (Stories → Import a Story) Cross-post to dev.to using RSS feed Social media/promotion &lt; Organic traffic Newsletter powered by https://buttondown. ...  </p>
              
          </section>
      </a>

      <footer class="post-card-meta">
          <img class="author-profile-image" src="https://cdn-images-1.medium.com/fit/c/200/200/0*Rb-aDjpTtV1UZA4O.jpeg" alt="Author" />
          <span class="post-card-author"><a href="/">Hugo Di Francesco</a></span>
      </footer>
    </div>
</article>
      
      
      <article class="post-card post"> 
    
    <a class="post-card-image-link" href="https://codewithhugo.com/add-a-client-side-paywall-using-checkoutpage.co-and-vanilla-javascript/">
      <div class="post-card-image" style="background-image: url(https://codewithhugo.com/img/samuel-zeller-2-unsplash.jpg)"></div>
    </a>
    

    <div class="post-card-content">
      <a class="post-card-content-link" href="https://codewithhugo.com/add-a-client-side-paywall-using-checkoutpage.co-and-vanilla-javascript/">
          <header class="post-card-header">
              <span class="post-card-tags">
              #JavaScript 
              #meta 
              #payment  </span>
              
              <h2 class="post-card-title">Add a client-side paywall using checkoutpage.co and vanilla JavaScript</h2>
          </header>
          <section class="post-card-excerpt">
              
                <p>How I created the buying mechanism for the Sequelize ES6 Cheatsheet using checkoutpage.co and sprinkles of vanilla JavaScript.
This strictly isn’t a paywall, it&rsquo;s all client-side and doesn&rsquo;t check much.
In principle you can display the whole things using a bit of CSS magic. You could also read the source and reverse-engineer what query params work for this page.
You could also spoof as Google Bot (or another crawler) and skip the pay overlay. ...  </p>
              
          </section>
      </a>

      <footer class="post-card-meta">
          <img class="author-profile-image" src="https://cdn-images-1.medium.com/fit/c/200/200/0*Rb-aDjpTtV1UZA4O.jpeg" alt="Author" />
          <span class="post-card-author"><a href="/">Hugo Di Francesco</a></span>
      </footer>
    </div>
</article>
      
    </div>
  </div>
</aside>

<div class="floating-header">
  <div class="floating-header-logo">
    <a href="https://codewithhugo.com/">
      
      <span>Code with Hugo</span>
    </a>
  </div>
  <span class="floating-header-divider">&mdash;</span>
  <div class="floating-header-title">Post Frequency: from prototype to production with Vue &#43; Node</div>
  <div class="floating-header-share">
    <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
     <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/></svg>
    </div>

    
    <a class="floating-header-share-tw" href="https://twitter.com/share?text=%22Post%20Frequency%3a%20from%20prototype%20to%20production%20with%20Vue%20%2b%20Node%22%20by%20%40hugo__df&amp;url=https%3a%2f%2fcodewithhugo.com%2fpost-frequency-from-prototype-to-production-with-vue---node%2f&amp"
          onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
      </a>
      <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fcodewithhugo.com%2fpost-frequency-from-prototype-to-production-with-vue---node%2f"
          onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>
      </a>
  </div>

  <progress class="progress" value="0">
    <div class="progress-container">
      <span class="progress-bar"></span>
    </div>
  </progress>
</div>



<footer class="site-footer outer">
  <div class="site-footer-content inner">
    <section class="copyright" style="line-height: 1.3em;">
      <a href="/">Code with Hugo</a>  <br>
      
    </section>
    <nav class="site-footer-nav">
        <a href="/">Latest Posts</a>
        
        <a href="https://twitter.com/hugo__df" target="_blank" rel="noopener">Twitter</a>
        <a href="https://github.com/HugoDF" target="_blank" rel="noopener">Github</a>
        
        <a href="https://medium.com/@hugo__df" target="_blank" rel="noopener">Medium</a>
    </nav>  
  </div>
</footer>

</div>

<script type="text/javascript" src="//code.jquery.com/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="https://codewithhugo.com/js/jquery.fitvids.js"></script>




  <!-- Google Analytics -->
  <script>
    var _gaq=[['_setAccount','UA-60469708-1'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
  </script>



<script async src="//cdn.simpleanalytics.io/hello.js"></script>
<noscript><img src="//api.simpleanalytics.io/hello.gif" alt=""></noscript>





<script>
  (function (document) {
    function getLastDocumentHeight(document) {
      var body = document.body;
      var html = document.documentElement;
      return Math.max(
        body.scrollHeight, body.offsetHeight,
        html.clientHeight, html.scrollHeight,
        html.offsetHeight
      );
    }

    var $overlay = document.querySelector('.overlay-cta');
    var hiddenClass = 'overlay-cta--hidden';
    var closedClass = 'overlay-cta--closed';
    $overlay.classList.add(hiddenClass);

    
    var $overlayClose = document.querySelector('.overlay-cta__close');
    var overlayCloseListener = $overlayClose.addEventListener('click', function (e) {
      e.preventDefault();
      $overlay.classList.add(closedClass);
    });

    var $heroCtaButton = document.querySelector('.hero-cta .button');
    var $firstContentItem = document.querySelector('.post-full-content > * > *');
    var title = $heroCtaButton || $firstContentItem;

    var $subscribeBox = document.querySelector('.subscribe-form');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = getLastDocumentHeight(document);
    var ticking = false;


    function onScroll() {
      lastScrollY = window.scrollY;
      requestTick();
    }

    function onResize() {
      lastWindowHeight = window.innerHeight;
      lastDocumentHeight = getLastDocumentHeight(document);
      requestTick();
    }

    function requestTick() {
      if (!ticking) {
        requestAnimationFrame(update);
      }
      ticking = true;
    }

    function update() {
      var trigger = title.getBoundingClientRect().top + window.scrollY;
      var triggerOffset = title.offsetHeight + 35;
      var lastShowCtaBoxHeight = $subscribeBox.getBoundingClientRect().top ;
      
      if (
        lastScrollY >= trigger + triggerOffset &&
        lastShowCtaBoxHeight > lastWindowHeight
      ) {
        $overlay.classList.remove(hiddenClass);
      } else {
        $overlay.classList.add(hiddenClass);
      }

      ticking = false;
    }

    window.addEventListener('scroll', onScroll, { passive: true });
    window.addEventListener('resize', onResize, false);

    update();
  })(document);
</script>


    <script>





$(document).ready(function () {
    
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>
</body></html>
