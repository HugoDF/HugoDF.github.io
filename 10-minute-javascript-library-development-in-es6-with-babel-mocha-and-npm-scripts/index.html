<!DOCTYPE html>
<html lang="en-US" />
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="google-site-verification" content="gBfbdXRLofaOyHsbgiSiuCIHKPaviGMRVWh_qOfDHNE" />

    <title>10 minute JavaScript: Library development in ES6 with Babel, Mocha and npm scripts &middot; Code with Hugo</title>

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#00aba9">
    <meta name="theme-color" content="#090a0b">

    <link rel="shortcut icon" href="https://codewithhugo.com/favicon.ico" />
    <meta name="theme-color" content="#090a0b">
     <link rel="canonical" href="https://blog.hellojs.org/10-minute-javascript-library-development-in-es6-with-babel-mocha-and-npm-scripts-9f08b22e69c3" /> 

     <meta name="description" content="Warning: the ecosystem has moved on since this post was originally published, it’s now easier than ever to set up a library for development: see Writing an npm " /> 

     
    
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:image" content="https://images.unsplash.com/photo-1507914997623-5b75b37d9cad?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=4daefc0d1e77d387f6e177a0990e42a8&auto=format&fit=crop&w=1000&q=80"/>
    
 
    <meta name="twitter:title" content="10 minute JavaScript: Library development in ES6 with Babel, Mocha and npm scripts"/>
    <meta name="twitter:description" content="Warning: the ecosystem has moved on since this post was originally published, it’s now easier than ever to set up a library for development: see Writing an npm "/>
    <meta name="twitter:url" content="https://codewithhugo.com/10-minute-javascript-library-development-in-es6-with-babel-mocha-and-npm-scripts/" />
    <meta name="twitter:site" content="@hugo__df"/>

    <meta property="og:site_name" content="Code with Hugo" />
    <meta property="og:title" content="10 minute JavaScript: Library development in ES6 with Babel, Mocha and npm scripts &middot; Code with Hugo" />
    <meta property="og:url" content="https://codewithhugo.com/10-minute-javascript-library-development-in-es6-with-babel-mocha-and-npm-scripts/" />
    

    <meta property="og:type" content="article" />
    <meta property="og:description" content="Warning: the ecosystem has moved on since this post was originally published, it’s now easier than ever to set up a library for development: see Writing an npm " />

    <meta property="article:published_time" content="2016-10-24T00:00:00Z" />
    <meta property="article:tag" content="Productivity" /><meta property="article:tag" content="JavaScript" />

    <meta property="og:image" content="https://images.unsplash.com/photo-1507914997623-5b75b37d9cad?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=4daefc0d1e77d387f6e177a0990e42a8&auto=format&fit=crop&w=1000&q=80"/>


    <meta name="generator" content="Hugo 0.46" />

    <!-- Stylesheets -->
    <link rel="stylesheet" type="text/css" href="https://codewithhugo.com/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="https://codewithhugo.com/css/casper-two.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" />
    
      
      <link rel="stylesheet" href="https://codewithhugo.com/overrides.min.bd35cf74c58c56c4aa8eff40730357744dec20ff31d8bae7b0618dbe30e0dbe4.css">
    
      
      <link rel="stylesheet" href="https://codewithhugo.com/syntax.min.e1646a3f88f77e1b5e7d0253633b1958013aa132890dfe4d7e15dc4718d4aecc.css">
    
      
      <link rel="stylesheet" href="https://codewithhugo.com/cta.min.2a90f41cf8cf23510a102e013116d80ad7ed31824b86f0862a21f69386ec9a51.css">
    

    

     
</head>


<body class="post-template">
  <div class="site-wrapper"> 

<header class="site-header outer">
  <div class="inner">
    <nav class="site-nav">
      <div class="site-nav-left">

        <ul class="nav" role="menu">
        
        
        
            <li class="" role="menuitem">
              <a href="/">Home</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/guides/">guides</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/tags/javascript/">JavaScript</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/tags/node/">Node</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/tags/css/">CSS</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/open/">#open</a>
            </li>
        
      </ul></div>

      <div class="site-nav-right">
        <div class="social-links">
                    

                    <a class="social-link social-link-tw" href="https://twitter.com/hugo__df" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg></a>

                    <a class="social-link" href="https://github.com/HugoDF" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a>

                    

                    <a class="social-link" href="https://medium.com/@hugo__df" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 195 195"><path d="M46.5340803,65.2157554 C46.6968378,63.6076572 46.0836,62.018231 44.8828198,60.93592 L32.6512605,46.2010582 L32.6512605,44 L70.6302521,44 L99.9859944,108.380952 L125.794585,44 L162,44 L162,46.2010582 L151.542017,56.2281011 C150.640424,56.9153477 150.193188,58.0448862 150.380019,59.1628454 L150.380019,132.837155 C150.193188,133.955114 150.640424,135.084652 151.542017,135.771899 L161.755369,145.798942 L161.755369,148 L110.38282,148 L110.38282,145.798942 L120.963119,135.527337 C122.002801,134.487948 122.002801,134.182246 122.002801,132.592593 L122.002801,73.0417402 L92.585901,147.755438 L88.6106443,147.755438 L54.3622782,73.0417402 L54.3622782,123.115814 C54.0767278,125.221069 54.7759199,127.3406 56.2581699,128.863022 L70.0186741,145.55438 L70.0186741,147.755438 L31,147.755438 L31,145.55438 L44.7605042,128.863022 C46.2319621,127.338076 46.8903838,125.204485 46.5340803,123.115814 L46.5340803,65.2157554 Z"/></svg></a>
        </div>  
        
        <a class="subscribe-button" href="https://codewithhugo.com/index.xml">Subscribe</a>
            
      </div>

    </nav>  

  </div>
</header>

<main id="site-main" class="site-main outer" role="main">
  <div class="inner">
    
      <article class="post-full post">
    <header class="post-full-header">
        <section class="post-full-meta">
            <time class="post-full-meta-date" datetime="2016-10-24">24 October 2016</time>
                <span class="date-divider">/</span> <a href="https://codewithhugo.com/tags/productivity/">#Productivity</a>&nbsp;<a href="https://codewithhugo.com/tags/javascript/">#JavaScript</a>&nbsp;
        </section>
        <h1 class="post-full-title">10 minute JavaScript: Library development in ES6 with Babel, Mocha and npm scripts</h1>
    </header>
    <div class="hero-container">

      
      <figure class="post-full-image" style="background-image: url(https://images.unsplash.com/photo-1507914997623-5b75b37d9cad?ixlib=rb-0.3.5&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;s=4daefc0d1e77d387f6e177a0990e42a8&amp;auto=format&amp;fit=crop&amp;w=1000&amp;q=80)">
        

      </figure>
    </div>

    <section class="post-full-content">
        <div class="kg-card-markdown">
        

<blockquote>
<p>Warning: the ecosystem has moved on since this post was originally published, it’s now easier than ever to set up a library for development:
see <a href="https://codewithhugo.com/writing-an-npm-module-with-typescript-and-microbundle/">Writing an npm module with microbundle</a> for an up to date view on how to develop a library</p>
</blockquote>

<p>JavaScript has a thriving ecosystem of libraries delivered as packages on npm. Node has a high degree of compatibility with ES6 but it doesn’t have some features yet, namely import. This means that if we want to distribute useable packages over npm and we want to be writing ES6, we have to transpile back to ES5.</p>

<p>We’ll be setting up a project that allows us to write ES6, and distribute it in ES5 (with Babel) and to test it with Mocha, all through npm scripts. We’ll also discuss some workflows that we can use to speed up our development.</p>

<p><strong>TL;DR</strong> Use this package.json, create a src folder, add an index.js and some .js and .test.js files inside it and off you go. You can also check out <a href="https://github.com/HugoDF/recursive-js">https://github.com/HugoDF/recursive-js</a>, it’s a decent example project. :)</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;library-js&#34;</span><span class="p">,</span>
  <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.0.0&#34;</span><span class="p">,</span>
  <span class="nt">&#34;description&#34;</span><span class="p">:</span> <span class="s2">&#34;Starter for library development with ES6, Babel, Mocha and npm scripts&#34;</span><span class="p">,</span>
  <span class="nt">&#34;main&#34;</span><span class="p">:</span> <span class="s2">&#34;./dist/index.js&#34;</span><span class="p">,</span>
  <span class="nt">&#34;scripts&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;start&#34;</span><span class="p">:</span> <span class="s2">&#34;npm run dev&#34;</span><span class="p">,</span>
    <span class="nt">&#34;dev&#34;</span><span class="p">:</span> <span class="s2">&#34;npm test -- -w&#34;</span><span class="p">,</span>
    <span class="nt">&#34;init&#34;</span><span class="p">:</span> <span class="s2">&#34;mkdir dist&#34;</span><span class="p">,</span>
    <span class="nt">&#34;clean&#34;</span><span class="p">:</span> <span class="s2">&#34;rm -rf dist&#34;</span><span class="p">,</span>
    <span class="nt">&#34;prebuild&#34;</span><span class="p">:</span> <span class="s2">&#34;npm run clean &amp;&amp; npm run init&#34;</span><span class="p">,</span>
    <span class="nt">&#34;build&#34;</span><span class="p">:</span> <span class="s2">&#34;babel ./src -d ./dist --ignore test.js&#34;</span><span class="p">,</span>
    <span class="nt">&#34;pretest&#34;</span><span class="p">:</span> <span class="s2">&#34;npm run build&#34;</span><span class="p">,</span>
    <span class="nt">&#34;test&#34;</span><span class="p">:</span> <span class="s2">&#34;mocha --compilers js:babel-core/register ./src/**/*.test.js&#34;</span><span class="p">,</span>
    <span class="nt">&#34;test:single&#34;</span><span class="p">:</span> <span class="s2">&#34;mocha --compilers js:babel-core/register&#34;</span>
  <span class="p">},</span>
  <span class="nt">&#34;author&#34;</span><span class="p">:</span> <span class="s2">&#34;Hugo Di Francesco&#34;</span><span class="p">,</span>
  <span class="nt">&#34;devDependencies&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;babel-cli&#34;</span><span class="p">:</span> <span class="s2">&#34;^6.16.0&#34;</span><span class="p">,</span>
    <span class="nt">&#34;babel-core&#34;</span><span class="p">:</span> <span class="s2">&#34;^6.17.0&#34;</span><span class="p">,</span>
    <span class="nt">&#34;babel-preset-es2015&#34;</span><span class="p">:</span> <span class="s2">&#34;^6.16.0&#34;</span><span class="p">,</span>
    <span class="nt">&#34;chai&#34;</span><span class="p">:</span> <span class="s2">&#34;^3.5.0&#34;</span><span class="p">,</span>
    <span class="nt">&#34;mocha&#34;</span><span class="p">:</span> <span class="s2">&#34;^3.1.2&#34;</span>
  <span class="p">},</span>
  <span class="nt">&#34;files&#34;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&#34;dist&#34;</span>
  <span class="p">]</span>
<span class="p">}</span></code></pre></div>
<h2 id="why-npm-scripts">Why npm scripts?</h2>

<p>npm scripts live in your package.json. This means you don’t have to create a new configuration file just to run your tasks.</p>

<p>These scripts use the packages installed inside the project ( ./node_modules). This means you don’t have to install dependencies globally just to build your project.</p>

<p>This setup makes it easy to compose your tasks. For example our build task will require both build:js and test to run but we can run the JavaScript build and the tests independently as well.</p>

<p>There are also built-in pre and post hooks like pretest, preinstall or postpublish.</p>

<h2 id="basic-boilerplate">Basic boilerplate</h2>

<p>We’re creating a library that implements map, filter and reduce in a recursive manner using ES6.</p>

<p><em>To learn more about these functions you can read this post:</em>
<a href="https://hackernoon.com/recursion-in-javascript-with-es6-destructuring-and-rest-spread-4b22ae5998fa"><strong>Recursion in JavaScript with ES6, destructuring and rest/spread</strong>
<em>The latest ECMA standard for JavaScript (ECMAScript 6) makes JavaScript more readable</em></a></p>

<p>We’ll runnpm init to generate a package.json that we will add our project scripts and dependencies to.</p>

<p>Our package.json should look something like this:</p>

<pre><code>{
  &quot;name&quot;: &quot;recursive-js&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;Recursive JavaScript with ES6, destructuring and rest/spread&quot;,
  &quot;main&quot;: &quot;index.js&quot;,
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
  },
  &quot;author&quot;: &quot;Hugo Di Francesco&quot;
}
</code></pre>

<p>This line:</p>

<pre><code>&quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
</code></pre>

<p>Describes an <em>npm script</em> that can be called using npm run test. Since tests are run often, npm is kind enough to also alias npm test and npm t to npm run test. We can try it out:</p>

<pre><code>$ npm t
&gt; recursive-js@1.0.0 test
&gt; echo &quot;Error: no test specified&quot; &amp;&amp; exit 1

Error: no test specified
npm ERR! Test failed.  See above for more details.
</code></pre>

<p>Which errors out, as expected since we don’t have any tests set up.</p>

<p>We should create a src directory that will contain our code, as well as a couple of files in there.</p>

<pre><code>$ mkdir src
$ touch src/index.js src/map.js src/filter.js src/reduce.js
</code></pre>

<p>We can check that they’ve been created:</p>

<pre><code>$ ls src
filter.js index.js map.js reduce.js
</code></pre>

<p>Let’s now put some ES6 code in our files (for more details on how these functions were implemented see <a href="https://hackernoon.com/recursion-in-javascript-with-es6-destructuring-and-rest-spread-4b22ae5998fa">Recursive JavaScript with ES6, destructuring and rest/spread</a>).</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">map</span><span class="p">([</span> <span class="nx">head</span><span class="p">,</span> <span class="p">...</span><span class="nx">tail</span> <span class="p">],</span> <span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">head</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">tail</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="p">[];</span>
  <span class="k">return</span> <span class="nx">tail</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="p">[</span> <span class="nx">fn</span><span class="p">(</span><span class="nx">head</span><span class="p">),</span> <span class="p">...(</span><span class="nx">map</span><span class="p">(</span><span class="nx">tail</span><span class="p">,</span> <span class="nx">fn</span><span class="p">))</span> <span class="p">]</span> <span class="o">:</span> <span class="p">[</span> <span class="nx">fn</span><span class="p">(</span><span class="nx">head</span><span class="p">)</span> <span class="p">];</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">reduce</span><span class="p">([</span> <span class="nx">head</span><span class="p">,</span> <span class="p">...</span><span class="nx">tail</span> <span class="p">],</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">initial</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">head</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">tail</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nx">initial</span><span class="p">;</span>
  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">initial</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">const</span> <span class="p">[</span> <span class="nx">newHead</span><span class="p">,</span> <span class="p">...</span><span class="nx">newTail</span><span class="p">]</span> <span class="o">=</span> <span class="nx">tail</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">reduce</span><span class="p">(</span><span class="nx">newTail</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">fn</span><span class="p">(</span><span class="nx">head</span><span class="p">,</span> <span class="nx">newHead</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">tail</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">reduce</span><span class="p">(</span><span class="nx">tail</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">fn</span><span class="p">(</span><span class="nx">initial</span><span class="p">,</span> <span class="nx">head</span><span class="p">))</span> <span class="o">:</span> <span class="p">[</span> <span class="nx">fn</span><span class="p">(</span><span class="nx">initial</span><span class="p">,</span> <span class="nx">head</span><span class="p">)</span> <span class="p">];</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">filter</span><span class="p">([</span> <span class="nx">head</span><span class="p">,</span> <span class="p">...</span><span class="nx">tail</span> <span class="p">],</span> <span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">const</span> <span class="nx">newHead</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">(</span><span class="nx">head</span><span class="p">)</span> <span class="o">?</span> <span class="p">[</span> <span class="nx">head</span> <span class="p">]</span> <span class="o">:</span> <span class="p">[];</span>
  <span class="k">return</span> <span class="nx">tail</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="p">[</span> <span class="p">...</span><span class="nx">newHead</span><span class="p">,</span> <span class="p">...(</span><span class="nx">filter</span><span class="p">(</span><span class="nx">tail</span><span class="p">,</span> <span class="nx">fn</span><span class="p">))</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">newHead</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Right now none of these functions can be loaded into another file, we’ll use ES6 default export to expose the functions so:</p>

<pre><code>// map.js
export function map() { /* ... */ }

// filter.js
export function filter() { /* ... */ }

// reduce.js
export function reduce() { /* ... */ }
</code></pre>

<p>Node hasn’t implemented this export syntax yet (you can <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export">find out more about it on MDN</a>), so we’ll need to transpile the code back to ES5 using something like Babel so that everyone using our package on npm is able to load it.</p>

<p>Let’s create a single entry point to all the functions in index.js:</p>

<pre><code>// index.js
export * from './map';
export * from './filter';
export * from './reduce';
</code></pre>

<h2 id="initialise-and-teardown-tasks">Initialise and teardown tasks</h2>

<p>We will store our code *source *(ES6) in the src directory and the transpiled, <em>distributable</em> version of the code in a dist directory.</p>

<p>Let’s start adding some npm scripts:</p>

<h3 id="init">init</h3>

<p>We’ll create the dist folder:</p>

<pre><code>// package.json in the &quot;scripts&quot; JSON object
&quot;init&quot;: &quot;mkdir dist&quot;
</code></pre>

<p>We can try it out:</p>

<pre><code>$ npm run init

&gt; recursive-js@1.0.0 init
&gt; mkdir dist

$ ls
dist package.json src
</code></pre>

<h3 id="clean">clean</h3>

<p>In this task we’ll want to remove the dist folder and all its content:</p>

<pre><code>// package.json in the &quot;scripts&quot; JSON object
&quot;clean&quot;: &quot;rm -rf dist&quot;
</code></pre>

<p>We can try it out:</p>

<pre><code>$ ls 
dist package.json src

$ npm run clean

&gt; recursive-js@1.0.0 init
&gt; rm -rf dist

$ ls
package.json src
</code></pre>

<h3 id="prebuild">prebuild</h3>

<p>Before building we’ll want to reset the dist folder. We can easily do this by deleting it and recreating it. Using the &amp;&amp; operator, we express that the first operation should complete successfully before the second one</p>

<pre><code>// package.json in the &quot;scripts&quot; JSON object
&quot;prebuild&quot;: &quot;npm run clean &amp;&amp; npm run init&quot;
</code></pre>

<p>This is a case of a pre hook. This runs before the build task every time we run npm run build at the command line. Unfortunately we don’t have a build task yet but we can check that it works properly by running the right-hand operation at the command line (in sh or bash).</p>

<pre><code>$ npm run clean &amp;&amp; npm run init

&gt; recursive-js@1.0.0 clean
&gt; rm -rf dist

&gt; recursive-js@1.0.0 init
&gt; mkdir dist
</code></pre>

<p>Our package.json now looks like this:</p>

<pre><code>{
  &quot;name&quot;: &quot;recursive-js&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;Recursive JavaScript with ES6, destructuring and rest/spread&quot;,
  &quot;main&quot;: &quot;index.js&quot;,
  &quot;scripts&quot;: {
    &quot;init&quot;: &quot;mkdir dist&quot;,
    &quot;clean&quot;: &quot;rm -rf dist&quot;,
    &quot;prebuild&quot;: &quot;npm run clean &amp;&amp; npm run init&quot;,
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
  },
  &quot;author&quot;: &quot;Hugo Di Francesco&quot;
}
</code></pre>

<h2 id="building-your-javascript-with-babel">Building your JavaScript with Babel</h2>

<p>To compile ES6 to ES5 we’ll need Babel. Install and save babel-cli and babel-preset-es2015 as devDependencies from npm:</p>

<pre><code>$ npm install --save-dev babel-cli babel-preset-es2015
</code></pre>

<h3 id="build-only-one-file">Build only one file</h3>

<p>The Babel CLI command to compile one file takes an argument (source file) and a couple of flags ( -o for output file and &ndash;presets for Babel presets):</p>

<pre><code>$ babel ./src/index.js -o ./dist/index.js --presets es2015
# compiles ./src/index.js to ES5 in ./dist/index.js
</code></pre>

<p>We could add this to package.json:</p>

<pre><code>// package.json in the &quot;scripts&quot; JSON object
&quot;build:single&quot;: &quot;babel ./src/index.js -o ./dist/index.js --presets es2015&quot;
</code></pre>

<p>However we want to transpile all the files.</p>

<h3 id="build-all-files">Build all files</h3>

<p>The flag to compile all files in a directory to a set output directory is -d, the command is therefore:</p>

<pre><code>$ babel src -d dist --presets es2015 
# you need babel-cli installed globally for this to work

src/filter.js -&gt; dist/filter.js
src/index.js -&gt; dist/index.js
src/map.js -&gt; dist/map.js
src/reduce.js -&gt; dist/reduce.js
</code></pre>

<p>We can add it to the package.json:</p>

<pre><code>// package.json in the &quot;scripts&quot; JSON object
&quot;build&quot;: &quot;babel src -d dist --presets es2015&quot;
</code></pre>

<p>And we can test it:</p>

<pre><code>$ npm run build

&gt; recursive-js@1.0.0 prebuild 
&gt; npm run clean &amp;&amp; npm run init

&gt; recursive-js@1.0.0 clean 
&gt; rm -rf dist

&gt; recursive-js@1.0.0 init 
&gt; mkdir dist

&gt; recursive-js@1.0.0 build 
&gt; babel ./src -d ./dist --presets es2015

src/filter.js -&gt; dist/filter.js
src/index.js -&gt; dist/index.js
src/map.js -&gt; dist/map.js
src/reduce.js -&gt; dist/reduce.js
</code></pre>

<p>Notice how prebuild gets run before build, just like we said. :)</p>

<p>We should also change the &ldquo;main&rdquo; property of our package.json to ./dist/index.js.</p>

<p>Current state of package.json:</p>

<pre><code>{
  &quot;name&quot;: &quot;recursive-js&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;Recursive JavaScript with ES6, destructuring and rest/spread&quot;,
  &quot;main&quot;: &quot;./dist/index.js&quot;,
  &quot;scripts&quot;: {
    &quot;init&quot;: &quot;mkdir dist&quot;,
    &quot;clean&quot;: &quot;rm -rf dist&quot;,
    &quot;prebuild&quot;: &quot;npm run clean &amp;&amp; npm run init&quot;,
    &quot;build&quot;: &quot;babel ./src -d ./dist --presets es2015&quot;,
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
  },
  &quot;author&quot;: &quot;Hugo Di Francesco&quot;,
  &quot;devDependencies&quot;: {
    &quot;babel-cli&quot;: &quot;^6.16.0&quot;,
    &quot;babel-preset-es2015&quot;: &quot;^6.16.0&quot;
  }
}
</code></pre>

<h2 id="running-your-tests-with-mocha">Running your tests with Mocha</h2>

<p><a href="https://mochajs.org/">*Mocha is a feature-rich JavaScript test framework</a> *that we’ll use to <strong>run</strong> the tests we write for our library. We’ll also use the <a href="http://chaijs.com/">*Chai Assertion Library</a>* to <strong>write</strong> our tests using the expect style. So we need to install both of these libraries.</p>

<pre><code>npm install --save-dev mocha chai
</code></pre>

<h3 id="getting-the-environment-ready">Getting the environment ready</h3>

<p>Mocha is able to run ES6 tests but we need to have babel-core available, so we should install that:</p>

<pre><code>npm install --save-dev babel-core
</code></pre>

<p>Now we did say that we didn’t need configuration files for Babel but it’s just easier to create one for consistency across library and testing presets, put this in a file called .babelrc in the root of your project:</p>

<pre><code>{
  &quot;presets&quot;: [&quot;es2015&quot;]
}
</code></pre>

<p>There are currently multiple ways to separate the test files from the library source files. One of them is to use a test folder, the other is to name all the test files *.test.js. We’ll demonstrate how to use the latter style (the difference between the two is just a case of changing a UNIX-style path).</p>

<h3 id="adding-some-tests">Adding some tests</h3>

<p>We’ll add some tests for map.js:</p>

<pre><code>import { expect } from 'chai';

import { map } from './map';

describe('map', () =&gt; {
  it('should maintain array length', () =&gt; {
    const arr = [ 1, 2, 3 ];
    expect(map(arr, x =&gt; x*2)).to.have.length(arr.length);
  });
  it('should return an empty array when passed an empty array', () =&gt; {
    expect(map([], x =&gt; x*2)).to.deep.equal([]);
  });
});
</code></pre>

<p>Save this under ./src/map.test.js.</p>

<p>And some tests for filter.js:</p>

<pre><code>import { expect } from 'chai';

import { filter } from './filter';

describe('filter', () =&gt; {
  it('should remove items that don\'t evaluate to true when passed to predicate function', () =&gt; {
    const arr = [ 1, 2, 3 ];
    const expected = [ 2, 3 ];
    expect(filter(arr, x =&gt; x &gt; 1)).to.deep.equal(expected);
  });
  it('should return an empty array when passed an empty array', () =&gt; {
    expect(filter([], x=&gt; x === 1)).to.deep.equal([]);
  });
});
</code></pre>

<h3 id="run-all-the-tests">Run all the tests</h3>

<p>We could theoretically run this at the command line, it’s a valid mocha command, although depending on how our machine is currently set up it may complain about some missing dependencies.</p>

<pre><code>mocha --compiler js:babel-core ./src/**/*.test.js
</code></pre>

<p>If we pop that into our package.json replacing the test line:</p>

<pre><code>// package.json in the &quot;scripts&quot; JSON object
&quot;test&quot;: &quot;mocha --compiler js:babel-core ./src/**/*.test.js&quot;
</code></pre>

<p>We can now try running the tests:</p>

<pre><code>$ npm t

&gt; recursive-js@1.0.0 test 
&gt; mocha --compilers js:babel-core/register ./src/**/*.test.js

filter
    ✓ should remove items that don't evaluate to true when passed to predicate function
    ✓ should return an empty array when passed an empty array

map
    ✓ should maintain array length
    ✓ should return an empty array when passed an empty array

4 passing (293ms)
</code></pre>

<p>All of which pass! :)</p>

<h3 id="running-a-single-test-file">Running a single test file</h3>

<p>The path passed to the npm run command will be forwarded recursively so if we want to run just one test (and we want to pass a path):</p>

<pre><code>mocha --compiler js:babel-core &quot;./src/map.test.js&quot;
</code></pre>

<p>We can call this test:single:</p>

<pre><code>// package.json in the &quot;scripts&quot; JSON object
&quot;test:single&quot;: &quot;mocha --compiler js:babel-core&quot;
</code></pre>

<p>To use it:</p>

<pre><code>$ npm run test:single ./src/map.test.js

&gt; recursive-js@1.0.0 test:single
&gt; mocha --compilers js:babel-core/register &quot;./src/map.test.js&quot;

map
    ✓ should maintain array length
    ✓ should return an empty array when passed an empty array

2 passing (279ms)
</code></pre>

<h3 id="using-a-test-folder">Using a <code>test</code> folder</h3>

<p>Left as homework to work out the kinks, but the path is should be something like ./test/*<em>/</em>.js.</p>

<h3 id="cleaning-up-the-build-task">Cleaning up the “build” task</h3>

<p>We can remove &ndash;presets es2015 from the build task since we’ve added a .babelrc.</p>

<p>Let’s check that the build task still works:</p>

<pre><code>$ npm run build

&gt; recursive-js@1.0.0 prebuild
&gt; npm run clean &amp;&amp; npm run init

&gt; recursive-js@1.0.0 clean
&gt; rm -rf dist

&gt; recursive-js@1.0.0 init
&gt; mkdir dist

&gt; recursive-js@1.0.0 build
&gt; babel ./src -d ./dist --presets es2015

src/filter.js -&gt; dist/filter.js
src/filter.test.js -&gt; dist/filter.test.js
src/index.js -&gt; dist/index.js
src/map.js -&gt; dist/map.js
src/map.test.js -&gt; dist/map.test.js
src/reduce.js -&gt; dist/reduce.js
</code></pre>

<p>It works but:</p>

<pre><code>src/filter.test.js -&gt; dist/filter.test.js
src/map.test.js -&gt; dist/map.test.js
</code></pre>

<p>This means it copies the test files over to dist which we don’t really need or want. Thankfully there’s a babel-cli flag for this, &ndash;ignore. We also now have a .babelrc so we don’t need to specify our &ndash;presets at the command line.</p>

<p>We can change build to:</p>

<pre><code>&quot;build&quot;: &quot;babel ./src -d ./dist --ignore test.js&quot;,
</code></pre>

<p>So our final package.json is:</p>

<pre><code>{
  &quot;name&quot;: &quot;recursive-js&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;Recursive JavaScript with ES6, destructuring and rest/spread&quot;,
  &quot;main&quot;: &quot;./dist/index.js&quot;,
  &quot;scripts&quot;: {
    &quot;init&quot;: &quot;mkdir dist&quot;,
    &quot;clean&quot;: &quot;rm -rf dist&quot;,
    &quot;prebuild&quot;: &quot;npm run clean &amp;&amp; npm run init&quot;,
    &quot;build&quot;: &quot;babel ./src -d ./dist --ignore test.js&quot;,
    &quot;test&quot;: &quot;mocha --compilers js:babel-core/register ./src/**/*.test.js&quot;,
    &quot;test:single&quot;: &quot;mocha --compilers js:babel-core/register&quot;
  },
  &quot;author&quot;: &quot;Hugo Di Francesco&quot;,
  &quot;devDependencies&quot;: {
    &quot;babel-cli&quot;: &quot;^6.16.0&quot;,
    &quot;babel-core&quot;: &quot;^6.17.0&quot;,
    &quot;babel-preset-es2015&quot;: &quot;^6.16.0&quot;,
    &quot;chai&quot;: &quot;^3.5.0&quot;,
    &quot;mocha&quot;: &quot;^3.1.2&quot;
  }
}
</code></pre>

<h2 id="workflow-suggestions">Workflow suggestions</h2>

<h3 id="build-the-code-before-every-test">Build the code before every test</h3>

<p>A lot of library development work is going to be test-driven (or at the command line). It’s a good idea to rebuild your dist files so that you don’t commit stale code (ie you actually commit what you were testing).</p>

<pre><code>&quot;pretest&quot;: &quot;npm run build&quot;
</code></pre>

<p>That was easy! Thanks to the the hooks npm scripts provide out of the box, all we had to do was add the command we would like to be run before tests run.</p>

<h3 id="build-the-code-run-tests-as-you-write">Build the code/run tests as you write</h3>

<p>We can add the following npm scripts:</p>

<pre><code>&quot;start&quot;: &quot;npm run dev&quot;,
&quot;dev&quot;: &quot;npm test -- -w&quot;,
</code></pre>

<p>We’re aliasing dev to start because start is one of the few scripts we can call without using npm run we can just do npm start (the other commands for which this works are: test, stop and restart).</p>

<p>&ndash; in npm scripts means “pass the following arguments straight to the called npm script”:</p>

<pre><code>$ npm run dev

&gt; recursive-js@1.0.0 dev
&gt; npm test -- -w

&gt; recursive-js@1.0.0 pretest
&gt; npm run build

&gt; recursive-js@1.0.0 prebuild
&gt; npm run clean &amp;&amp; npm run init

&gt; recursive-js@1.0.0 clean
&gt; rm -rf dist

&gt; recursive-js@1.0.0 init
&gt; mkdir dist

&gt; recursive-js@1.0.0 build
&gt; babel ./src -d ./dist --ignore test.js

src/filter.js -&gt; dist/filter.js
src/index.js -&gt; dist/index.js
src/map.js -&gt; dist/map.js
src/reduce.js -&gt; dist/reduce.js

&gt; recursive-js@1.0.0 test
&gt; mocha --compilers js:babel-core/register ./src/**/*.test.js **&quot;-w&quot;**

filter
    ✓ should remove items that don't evaluate to true when passed to predicate function
    ✓ should return an empty array when passed an empty array

map
    ✓ should maintain array length
    ✓ should return an empty array when passed an empty array

4 passing (274ms)
</code></pre>

<p>The -w option for mocha will watch for file changes and rerun the command when they do. Which means our builds and tests get run automatically whenever anything changes.</p>

<h3 id="use-the-files-field-to-describe-what-files-should-be-installed">Use the <code>files</code> field to describe what files should be installed</h3>

<p>This is about being a good package maintainer. Just like we don’t babel-compile our tests into the dist folder, we should keep as much code out of the version of the package that is npm-installed by the end user.</p>

<p>The &ldquo;files&rdquo; field in package.json allows us to specify which files are required by the end user. In our case it’s just the dist folder.</p>

<pre><code>&quot;files&quot;: [
  &quot;dist&quot;
]
</code></pre>

<p><em>Note: instead of whitelisting which files we need, we could also blacklist items using an .npmignore file.</em></p>

<p>So that’s how to use npm scripts, Babel and Mocha to create a library using ES6 :). Feel free to write a reply with any questions.</p>

        </div>
    </section>

    <section class="subscribe-form">
        <h3 class="subscribe-form-title">Subscribe to Code with Hugo</h3>
        <p>Get all the posts of the week before anyone else in your inbox</p>
        <form
            action="https://buttondown.email/api/emails/embed-subscribe/hugo"
            method="post"
            target="popupwindow"
            onsubmit="window.open('https://buttondown.email/hugo', 'popupwindow')"
        >
            <div class="form-group">
                <input class="subscribe-email" type="email" name="email" id="bd-email" placeholder="youremail@example.com">
                <input type="hidden" value="1" name="embed"/>
            </div>
            <button class="" value="Subscribe" type="submit"><span>Subscribe</span></button>
        </form>
    </section>

    <footer class="post-full-footer">
      <section class="author-card">
        <img class="author-profile-image" src="https://cdn-images-1.medium.com/fit/c/200/200/0*Rb-aDjpTtV1UZA4O.jpeg" alt="Author" />
        <section class="author-card-content">
            <h4 class="author-card-name"><a href="https://codewithhugo.com/">Hugo Di Francesco</a></h4>
                <p>A developer, working out of London writing CSS, JavaScript and Python.</p>
        </section>
      </section>
    </footer>
</article>


  <section class="overlay-cta">
    <div class="overlay-cta__inner">
      <div class="overlay-cta__text-container">
        <h3 class="cta-title overlay-cta__title">
          Subscribe to the Code with Hugo newsletter
        </h3>
        <p class="cta-text overlay-cta__text">
          Get the latest articles in your inbox every 2 weeks
        </p>
      </div>
      <div class="overlay-cta__button-container">
        <a href="https://buttondown.email/hugo" class="button overlay-cta__button">
          Subscribe
        </a>
        <a href="#" class="overlay-cta__close">close</a>
      </div>
    </div>
  </section>



    
    
    

  </div>
</main>


<aside class="read-next outer">
  <div class="inner">
    <div class="read-next-feed">      
      
<article class="read-next-card" 
            style="background-image: url(https://codewithhugo.com/img/cover.jpg);" >
    <header class="read-next-card-header">
        <small class="read-next-card-header-sitetitle">&mdash; Code with Hugo &mdash;</small>
        
        <h3 class="read-next-card-header-title"><a href="https://codewithhugo.com/tags/productivity/">#Productivity</a></h3>
    </header>
    <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
    </div>

    <div class="read-next-card-content">
      
        <ul>
          <li><a href="https://codewithhugo.com/impress-interviewers-with-recursion-in-javascript-with-es6-features/">Impress interviewers with recursion in JavaScript with ES6 features</a></li>            
        
          <li><a href="https://codewithhugo.com/python-graphql-client-requests-example-using-gql/">Python GraphQL client requests example using gql</a></li>            
        
          <li><a href="https://codewithhugo.com/ava-low-config-testing-for-javascript/">AVA, low-config testing for JavaScript</a></li>            
        
          <li><a href="https://codewithhugo.com/unit-testing-sequelize-4-es6-class-models/">Unit Testing Sequelize 4 ES6 class models</a></li>            
        </ul>
    </div>
    <footer class="read-next-card-footer">
      
        <a href="https://codewithhugo.com/tags/productivity/">See all related posts →</a>
    </footer>
</article>


      
      <article class="post-card post"> 
    
    <a class="post-card-image-link" href="https://codewithhugo.com/closures-partial-application-and-currying-effective-functional-javascript/">
      <div class="post-card-image" style="background-image: url(https://cdn-images-1.medium.com/fit/1000/1000/1*6JWjrAzwchgcr823H9g8Og.jpeg)"></div>
    </a>
    

    <div class="post-card-content">
      <a class="post-card-content-link" href="https://codewithhugo.com/closures-partial-application-and-currying-effective-functional-javascript/">
          <header class="post-card-header">
              <span class="post-card-tags">
              #JavaScript 
              #Functional Programming 
              #Productivity  </span>
              
              <h2 class="post-card-title">Closures, Partial Application and Currying: Effective Functional JavaScript</h2>
          </header>
          <section class="post-card-excerpt">
              
                <p>Spices and other ingredients of a great curry
To use JavaScript to its full potential you have to embrace its strong functional programming base. We’re going to explore some crucial and powerful functional constructs: closures, partial application and currying that make JavaScript terse yet understandable.
The basics Functional programming is a programming paradigm that follows a more mathematical computation model. Let’s go through some basics to make your JavaScript more functional. ...  </p>
              
          </section>
      </a>

      <footer class="post-card-meta">
          <img class="author-profile-image" src="https://cdn-images-1.medium.com/fit/c/200/200/0*Rb-aDjpTtV1UZA4O.jpeg" alt="Author" />
          <span class="post-card-author"><a href="/">Hugo Di Francesco</a></span>
      </footer>
    </div>
</article>
      
      
      <article class="post-card post"> 
    
    <a class="post-card-image-link" href="https://codewithhugo.com/recursion-in-javascript-with-es6-destructuring-and-rest/spread/">
      <div class="post-card-image" style="background-image: url(https://images.unsplash.com/photo-1416269223193-bc45028133f5?ixlib=rb-0.3.5&amp;s=de9cf50e342bd5a92bf1850dc7f409c0&amp;auto=format&amp;fit=crop&amp;w=600&amp;q=80)"></div>
    </a>
    

    <div class="post-card-content">
      <a class="post-card-content-link" href="https://codewithhugo.com/recursion-in-javascript-with-es6-destructuring-and-rest/spread/">
          <header class="post-card-header">
              <span class="post-card-tags">
              #JavaScript 
              #ES6 
              #web development  </span>
              
              <h2 class="post-card-title">Recursion in JavaScript with ES6, destructuring and rest/spread</h2>
          </header>
          <section class="post-card-excerpt">
              
                <p>The latest ECMA standard for JavaScript (ECMAScript 6) makes JavaScript more readable by encouraging a more declarative style with functional constructs and new operators.
Destructuring One of my favourite ES6 features is destructuring. It allows you to extract data from one variable to another by using structure. For arrays this means for example:
var [first, second] = [1, 2, 3, 4]; // first: 1 // second: 2  There’s more you can do, like skip some members of the array on the right-hand side of the operation. ...  </p>
              
          </section>
      </a>

      <footer class="post-card-meta">
          <img class="author-profile-image" src="https://cdn-images-1.medium.com/fit/c/200/200/0*Rb-aDjpTtV1UZA4O.jpeg" alt="Author" />
          <span class="post-card-author"><a href="/">Hugo Di Francesco</a></span>
      </footer>
    </div>
</article>
      
    </div>
  </div>
</aside>

<div class="floating-header">
  <div class="floating-header-logo">
    <a href="https://codewithhugo.com/">
      
      <span>Code with Hugo</span>
    </a>
  </div>
  <span class="floating-header-divider">&mdash;</span>
  <div class="floating-header-title">10 minute JavaScript: Library development in ES6 with Babel, Mocha and npm scripts</div>
  <div class="floating-header-share">
    <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
     <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/></svg>
    </div>

    
    <a class="floating-header-share-tw" href="https://twitter.com/share?text=%2210%20minute%20JavaScript%3a%20Library%20development%20in%20ES6%20with%20Babel%2c%20Mocha%20and%20npm%20scripts%22%20by%20%40hugo__df&amp;url=https%3a%2f%2fcodewithhugo.com%2f10-minute-javascript-library-development-in-es6-with-babel-mocha-and-npm-scripts%2f&amp"
          onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
      </a>
      <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fcodewithhugo.com%2f10-minute-javascript-library-development-in-es6-with-babel-mocha-and-npm-scripts%2f"
          onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>
      </a>
  </div>

  <progress class="progress" value="0">
    <div class="progress-container">
      <span class="progress-bar"></span>
    </div>
  </progress>
</div>



<footer class="site-footer outer">
  <div class="site-footer-content inner">
    <section class="copyright" style="line-height: 1.3em;">
      <a href="/">Code with Hugo</a>  <br>
      
    </section>
    <nav class="site-footer-nav">
        <a href="/">Latest Posts</a>
        
        <a href="https://twitter.com/hugo__df" target="_blank" rel="noopener">Twitter</a>
        <a href="https://github.com/HugoDF" target="_blank" rel="noopener">Github</a>
        
        <a href="https://medium.com/@hugo__df" target="_blank" rel="noopener">Medium</a>
    </nav>  
  </div>
</footer>

</div>

<script type="text/javascript" src="//code.jquery.com/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="https://codewithhugo.com/js/jquery.fitvids.js"></script>




  <!-- Google Analytics -->
  <script>
    var _gaq=[['_setAccount','UA-60469708-1'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
  </script>



<script async src="//cdn.simpleanalytics.io/hello.js"></script>
<noscript><img src="//api.simpleanalytics.io/hello.gif" alt=""></noscript>





<script>
  (function (document) {
    function getLastDocumentHeight(document) {
      var body = document.body;
      var html = document.documentElement;
      return Math.max(
        body.scrollHeight, body.offsetHeight,
        html.clientHeight, html.scrollHeight,
        html.offsetHeight
      );
    }

    var $overlay = document.querySelector('.overlay-cta');
    var hiddenClass = 'overlay-cta--hidden';
    var closedClass = 'overlay-cta--closed';
    $overlay.classList.add(hiddenClass);

    
    var $overlayClose = document.querySelector('.overlay-cta__close');
    var overlayCloseListener = $overlayClose.addEventListener('click', function (e) {
      e.preventDefault();
      $overlay.classList.add(closedClass);
    });

    var $heroCtaButton = document.querySelector('.hero-cta .button');
    var $firstContentItem = document.querySelector('.post-full-content > * > *');
    var title = $heroCtaButton || $firstContentItem;

    var $subscribeBox = document.querySelector('.subscribe-form');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = getLastDocumentHeight(document);
    var ticking = false;


    function onScroll() {
      lastScrollY = window.scrollY;
      requestTick();
    }

    function onResize() {
      lastWindowHeight = window.innerHeight;
      lastDocumentHeight = getLastDocumentHeight(document);
      requestTick();
    }

    function requestTick() {
      if (!ticking) {
        requestAnimationFrame(update);
      }
      ticking = true;
    }

    function update() {
      var trigger = title.getBoundingClientRect().top + window.scrollY;
      var triggerOffset = title.offsetHeight + 35;
      var lastShowCtaBoxHeight = $subscribeBox.getBoundingClientRect().top ;
      
      if (
        lastScrollY >= trigger + triggerOffset &&
        lastShowCtaBoxHeight > lastWindowHeight
      ) {
        $overlay.classList.remove(hiddenClass);
      } else {
        $overlay.classList.add(hiddenClass);
      }

      ticking = false;
    }

    window.addEventListener('scroll', onScroll, { passive: true });
    window.addEventListener('resize', onResize, false);

    update();
  })(document);
</script>


    <script>





$(document).ready(function () {
    
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>
</body></html>
