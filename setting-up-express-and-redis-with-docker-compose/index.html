<!DOCTYPE html>
<html lang="en-US" />
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="google-site-verification" content="gBfbdXRLofaOyHsbgiSiuCIHKPaviGMRVWh_qOfDHNE" />

    <title>Setting up Express and Redis with Docker compose &middot; Code with Hugo</title>

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://codewithhugo.com/favicon.ico" />
    <meta name="theme-color" content="#090a0b">
    
    <link rel="canonical" href="https://codewithhugo.com/setting-up-express-and-redis-with-docker-compose/" /> 

     <meta name="description" content="Redis and Express are tools that provide a simple and clean approach to their problem domains.
The repo is available at: https://github.com/HugoDF/express-redis" /> 

     
    
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:image" content="https://codewithhugo.com/img/ben-koorengevel-unsplash.jpg"/>
    
 
    <meta name="twitter:title" content="Setting up Express and Redis with Docker compose"/>
    <meta name="twitter:description" content="Redis and Express are tools that provide a simple and clean approach to their problem domains.
The repo is available at: https://github.com/HugoDF/express-redis"/>
    <meta name="twitter:url" content="https://codewithhugo.com/setting-up-express-and-redis-with-docker-compose/" />
    <meta name="twitter:site" content="@hugo__df"/>

    <meta property="og:site_name" content="Code with Hugo" />
    <meta property="og:title" content="Setting up Express and Redis with Docker compose &middot; Code with Hugo" />
    <meta property="og:url" content="https://codewithhugo.com/setting-up-express-and-redis-with-docker-compose/" />
    

    <meta property="og:type" content="article" />
    <meta property="og:description" content="Redis and Express are tools that provide a simple and clean approach to their problem domains.
The repo is available at: https://github.com/HugoDF/express-redis" />

    <meta property="article:published_time" content="2018-06-06T00:00:00Z" />
    <meta property="article:tag" content="JavaScript" /><meta property="article:tag" content="Node" /><meta property="article:tag" content="Docker" /><meta property="article:tag" content="redis" />

    <meta property="og:image" content="https://codewithhugo.com/img/ben-koorengevel-unsplash.jpg"/>


    <meta name="generator" content="Hugo 0.36" />

    <!-- Stylesheets -->
    <link rel="stylesheet" type="text/css" href="https://codewithhugo.com/built/screen.css" /> 
    <link rel="stylesheet" type="text/css" href="https://codewithhugo.com/css/casper-two.css" /> 
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" />
     <link rel="stylesheet" href="https://codewithhugo.com/overrides.min.css" />  <link rel="stylesheet" href="https://codewithhugo.com/syntax.min.css" /> 

    <link href="https://buttondown.email/hugo" rel="alternate" title="Code with Hugo" /> 
</head>


<body class="post-template">
  <div class="site-wrapper"> 

<header class="site-header outer">
  <div class="inner">
    <nav class="site-nav">
      <div class="site-nav-left">

        <ul class="nav" role="menu">
        
        
        
            <li class="" role="menuitem">
              <a href="/">Home</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/tags/javascript/">JavaScript</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/tags/node/">Node</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/tags/css/">CSS</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/tags/tip/">tips</a>
            </li>
        
      </ul></div>

      <div class="site-nav-right">
        <div class="social-links">
                    

                    <a class="social-link social-link-tw" href="https://twitter.com/hugo__df" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg></a>

                    <a class="social-link" href="https://github.com/HugoDF" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a>

                    

                    <a class="social-link" href="https://medium.com/@hugo__df" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 195 195"><path d="M46.5340803,65.2157554 C46.6968378,63.6076572 46.0836,62.018231 44.8828198,60.93592 L32.6512605,46.2010582 L32.6512605,44 L70.6302521,44 L99.9859944,108.380952 L125.794585,44 L162,44 L162,46.2010582 L151.542017,56.2281011 C150.640424,56.9153477 150.193188,58.0448862 150.380019,59.1628454 L150.380019,132.837155 C150.193188,133.955114 150.640424,135.084652 151.542017,135.771899 L161.755369,145.798942 L161.755369,148 L110.38282,148 L110.38282,145.798942 L120.963119,135.527337 C122.002801,134.487948 122.002801,134.182246 122.002801,132.592593 L122.002801,73.0417402 L92.585901,147.755438 L88.6106443,147.755438 L54.3622782,73.0417402 L54.3622782,123.115814 C54.0767278,125.221069 54.7759199,127.3406 56.2581699,128.863022 L70.0186741,145.55438 L70.0186741,147.755438 L31,147.755438 L31,145.55438 L44.7605042,128.863022 C46.2319621,127.338076 46.8903838,125.204485 46.5340803,123.115814 L46.5340803,65.2157554 Z"/></svg></a>
        </div>  
        
        <a class="subscribe-button" href="https://buttondown.email/hugo">Subscribe</a> </div>
            
      </div>

    </nav>  

  </div>
</header>

<main id="site-main" class="site-main outer" role="main">
  <div class="inner">
    
      <article class="post-full post"> 
    <header class="post-full-header">
        <section class="post-full-meta">
            <time class="post-full-meta-date" datetime="2018-06-06">6 June 2018</time>
                <span class="date-divider">/</span> <a href="https://codewithhugo.com/tags/javascript/">#JavaScript</a>&nbsp;<a href="https://codewithhugo.com/tags/node/">#Node</a>&nbsp;
        </section>
        <h1 class="post-full-title">Setting up Express and Redis with Docker compose</h1>
    </header>
    
    <figure class="post-full-image" style="background-image: url(https://codewithhugo.com/img/ben-koorengevel-unsplash.jpg)">
    </figure>

    <section class="post-full-content">
        <div class="kg-card-markdown">
        

<p>Redis and Express are tools that provide a simple and clean approach to their problem domains.</p>

<p>The repo is available at: <a href="https://github.com/HugoDF/express-redis-docker">https://github.com/HugoDF/express-redis-docker</a>.</p>

<p><a href="https://redis.io/">Redis</a> is ‚Äúan open source, in-memory data structure store, used as a database, cache and message broker‚Äù. It‚Äôs as simple and unopinionated as a database as it gets, it‚Äôs known for its performance and simplicity as a key-value store. It has great flexibility and can also be used as a message queue, circular buffer (and pretty much anything else a developer can come up with short of a relational database).</p>

<p><a href="https://expressjs.com/">Express</a> is a ‚Äúfast, unopinionated, minimalist web framework for Node.js‚Äù. In other words, it‚Äôs a wrapper around Node‚Äôs server, that provides a way to write what‚Äôs called ‚Äúmiddleware‚Äù to share and compose functionality across HTTP endpoints as well as define said endpoints.</p>

<p>Getting Redis and Express to work together is trivial. Getting Redis and Express to work together in a way that‚Äôs fool and future-proof, and reproducible across local and deployed environments, is slightly harder. That‚Äôs where Docker and Docker Compose come in.</p>

<p>Docker is a containerisation system, Docker Compose is a way to define how multiple Docker containers interact. In the context of Node web application development, Docker tends to be used to define a container that has the required system-level dependencies (eg. Node version, any extra database drivers). Docker Compose would be used to define dependencies outside of the Node application, for example databases.</p>

<ul>
<li><a href="#initialising-express-%F0%9F%9A%85">Initialising Express üöÖ</a></li>
<li><a href="#running-node-inside-of-docker-%F0%9F%8C%8A">Running Node inside of Docker üåä</a></li>
<li><a href="#adding-redis">Adding Redis</a></li>
<li><a href="#creating-a-blob-store-%F0%9F%93%92">Creating a blob store üìí</a></li>
</ul>

<h1 id="initialising-express">Initialising Express üöÖ</h1>

<p>To start off, we should create a new directory/initialise npm:</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">mkdir express-redis
<span class="nb">cd</span> express-redis
npm init -y</code></pre></div>
<p>We can then install Express:</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">npm i --save express</code></pre></div>
<p>And create a <code>server.js</code> file that looks like the following:</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// server.js
</span><span class="c1"></span><span class="k">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
<span class="k">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;Hello world&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="k">const</span> <span class="nx">PORT</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">3000</span><span class="p">;</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">PORT</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Server listening on port </span><span class="si">${</span><span class="nx">PORT</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="p">});</span></code></pre></div>
<p>That can be run using:</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">node server.js</code></pre></div>
<p>We can check that it‚Äôs working as expected</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">curl http://localhost:3000/
Hello world</code></pre></div>
<h1 id="running-node-inside-of-docker">Running Node inside of Docker üåä</h1>

<p>To begin you‚Äôll want to install <a href="https://www.docker.com/community-edition">Docker Community Edition</a> (<a href="https://www.docker.com/community-edition">https://www.docker.com/community-edition</a>).
Then we can add a <code>Dockerfile</code> and a <code>docker-compose.yml</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="c"># Dockerfile</span><span class="err">
</span><span class="err"></span><span class="k">FROM</span><span class="s"> node:9-alpine</span><span class="err">
</span><span class="err"></span><span class="c"># Or whatever Node version/image you want</span><span class="err">
</span><span class="err"></span><span class="k">WORKDIR</span><span class="s"> &#39;/var/www/app&#39;</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="c"># docker-compose.yml</span><span class="w">
</span><span class="w"></span>app<span class="p">:</span><span class="w">
</span><span class="w">    </span>build<span class="p">:</span><span class="w"> </span>./<span class="w">
</span><span class="w">    </span>volumes<span class="p">:</span><span class="w">
</span><span class="w">    </span>-<span class="w"> </span>./<span class="p">:</span>/var/www/app<span class="w">
</span><span class="w">    </span>ports<span class="p">:</span><span class="w">
</span><span class="w">    </span>-<span class="w"> </span><span class="m">3000</span><span class="p">:</span><span class="m">3000</span><span class="w">
</span><span class="w">    </span>environment<span class="p">:</span><span class="w">
</span><span class="w">    </span>-<span class="w"> </span>NODE_ENV=development<span class="w">
</span><span class="w">    </span>-<span class="w"> </span>PORT=<span class="m">3000</span><span class="w">
</span><span class="w">    </span>command<span class="p">:</span><span class="w">
</span><span class="w">    </span>sh<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;npm i &amp;&amp; node server.js&#39;</span></code></pre></div>
<p>Now run the app inside of Docker/Docker Compose:</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">docker-compose up</code></pre></div>
<p>And check that it still works</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">curl http://localhost:3000/
Hello world</code></pre></div>
<p>Some extra context:</p>

<ul>
<li>The <code>Dockerfile</code> defines what container the application will be running in (here a Node 9 container built on top of alpine)</li>
<li><code>docker-compose.yml</code>:

<ul>
<li><code>build</code> explains which image should be used by the <code>app</code> service definition (in this case, it points to what would be created by running the <code>Dockerfile</code>)</li>
<li><code>volumes</code> defines what should be mounted where (in this case, we‚Äôll mount the whole directory as <code>/var/www/app</code></li>
<li><code>ports</code> maps ports from the host system to ports inside the container</li>
<li><code>environment</code> sets environment variables for the container</li>
<li><code>command</code> determines what will be run on startup of the container, here it runs <code>npm install</code> followed by the server startup command</li>
</ul></li>
</ul>

<h1 id="adding-redis">Adding Redis</h1>

<p>To add Redis to our Express app we should use the <code>redis</code> package:</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">npm install --save redis</code></pre></div>
<p>Then we should probably wrap all the callback-based methods we want to use (see the api docs for the redis package, <a href="https://github.com/NodeRedis/node_redis#api">https://github.com/NodeRedis/node_redis#api</a>).
Let‚Äôs do this using a <code>redis-client.js</code> module:</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// redis-client.js
</span><span class="c1"></span><span class="k">const</span> <span class="nx">redis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;redis&#39;</span><span class="p">);</span>
<span class="k">const</span> <span class="p">{</span><span class="nx">promisify</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;util&#39;</span><span class="p">);</span>
<span class="k">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">redis</span><span class="p">.</span><span class="nx">createClient</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">REDIS_URL</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">...</span><span class="nx">client</span><span class="p">,</span>
  <span class="nx">getAsync</span><span class="o">:</span> <span class="nx">promisify</span><span class="p">(</span><span class="nx">client</span><span class="p">.</span><span class="nx">get</span><span class="p">).</span><span class="nx">bind</span><span class="p">(</span><span class="nx">client</span><span class="p">),</span>
  <span class="nx">setAsync</span><span class="o">:</span> <span class="nx">promisify</span><span class="p">(</span><span class="nx">client</span><span class="p">.</span><span class="nx">set</span><span class="p">).</span><span class="nx">bind</span><span class="p">(</span><span class="nx">client</span><span class="p">),</span>
  <span class="nx">keysAsync</span><span class="o">:</span> <span class="nx">promisify</span><span class="p">(</span><span class="nx">client</span><span class="p">.</span><span class="nx">keys</span><span class="p">).</span><span class="nx">bind</span><span class="p">(</span><span class="nx">client</span><span class="p">)</span>
<span class="p">};</span></code></pre></div>
<p>To running Redis inside of Docker Compose in such a way that our app can access it:</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="c"># docker-compose.yml</span><span class="w">
</span><span class="w"></span><span class="c"># Add this top-level entry</span><span class="w">
</span><span class="w"></span>redis<span class="p">:</span><span class="w">
</span><span class="w">    </span>image<span class="p">:</span><span class="w"> </span>redis<span class="w">
</span><span class="w">    </span>container_name<span class="p">:</span><span class="w"> </span>cache<span class="w">
</span><span class="w">    </span>expose<span class="p">:</span><span class="w">
</span><span class="w">    </span>-<span class="w"> </span><span class="m">6379</span><span class="w">
</span><span class="w">    
</span><span class="w"></span>app<span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="c"># some definitions</span><span class="w">
</span><span class="w">    </span>links<span class="p">:</span><span class="w">
</span><span class="w">    </span>-<span class="w"> </span>redis<span class="w">
</span><span class="w">    </span>environment<span class="p">:</span><span class="w">
</span><span class="w">    </span>-<span class="w"> </span>REDIS_URL=redis<span class="p">:</span>//cache<span class="w">
</span><span class="w">    </span><span class="c"># rest of the environment definitions</span></code></pre></div>
<p>We can now access the Redis client from the app container:</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">docker-compose run app node
&gt; require<span class="o">(</span><span class="s1">&#39;./redis-client&#39;</span><span class="o">)</span> // doesn<span class="err">&#39;</span>t crash</code></pre></div>
<h1 id="creating-a-blob-store">Creating a blob store üìí</h1>

<p>We can now create a HTTP API that will allow us to store data using query params and retrieve them using a get request (this isn‚Äôt RESTful at all but oh well üôÇ ).</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// server.js
</span><span class="c1">// imports and app definition
</span><span class="c1"></span>
<span class="k">const</span> <span class="nx">redisClient</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./redis-client&#39;</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/store/:key&#39;</span><span class="p">,</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">const</span> <span class="p">{</span> <span class="nx">key</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">;</span>
    <span class="k">const</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">;</span>
    <span class="kr">await</span> <span class="nx">redisClient</span><span class="p">.</span><span class="nx">setAsync</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">value</span><span class="p">));</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;Success&#39;</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/:key&#39;</span><span class="p">,</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">const</span> <span class="p">{</span> <span class="nx">key</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">;</span>
    <span class="k">const</span> <span class="nx">rawData</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">redisClient</span><span class="p">.</span><span class="nx">getAsync</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">rawData</span><span class="p">));</span>
<span class="p">});</span>

<span class="err">// code that starts the app...</span></code></pre></div>
<p>If you have any questions about the above code let me know <a href="https://twitter.com/hugo__df">@hugo__df</a>. It is using a couple of more advanced features like async/await and destructuring as well as Express features to get query and path parameters (see <a href="https://expressjs.com/en/api.html#req.query">https://expressjs.com/en/api.html#req.query</a>, <a href="https://expressjs.com/en/api.html#req.params">https://expressjs.com/en/api.html#req.params</a>).</p>

<p>Get the app running again: <code>docker-compose up</code></p>

<ol>
<li>Store some data:
<code>
curl http://localhost:3000/store/my-key\?some\=value\&amp;some-other\=other-value
Success
</code></li>
<li>Retrieve that data:
<code>
curl http://localhost:3000/my-key
{
&quot;some&quot;: &quot;value&quot;,
&quot;some-other&quot;: &quot;other-value&quot;
}
</code></li>
</ol>

<blockquote>
<p>Note to more advanced Express users, and API design gurus.
The reason I used an old school query-param based system is to avoid the boilerplate of using <code>body-parser</code> with POST requests</p>
</blockquote>

<p>Full repository available at: <a href="https://github.com/HugoDF/express-redis-docker">https://github.com/HugoDF/express-redis-docker</a></p>

<p>Cover photo by <a href="https://unsplash.com/photos/rpMwfGLSsd8?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Ben Koorengevel</a> on <a href="https://unsplash.com/search/photos/boats?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a></p>
    
        </div>
    </section>

    <section class="subscribe-form">
        <h3 class="subscribe-form-title">Subscribe to Code with Hugo</h3>
        <p>Get all the posts of the week before anyone else in your inbox</p>
        <form
            action="https://buttondown.email/api/emails/embed-subscribe/hugo"
            method="post"
            target="popupwindow"
            onsubmit="window.open('https://buttondown.email/hugo', 'popupwindow')"
        >
            <div class="form-group">
                <input class="subscribe-email" type="email" name="email" id="bd-email" placeholder="youremail@example.com">
                <input type="hidden" value="1" name="embed"/>
            </div>
            <button class="" value="Subscribe" type="submit"><span>Subscribe</span></button>
        </form>
    </section>

    <footer class="post-full-footer">
      <section class="author-card">
        <img class="author-profile-image" src="https://cdn-images-1.medium.com/fit/c/200/200/0*Rb-aDjpTtV1UZA4O.jpeg" alt="Author" />
        <section class="author-card-content">
            <h4 class="author-card-name"><a href="https://codewithhugo.com/">Hugo Di Francesco</a></h4>
                <p>A developer, working out of London writing CSS, JavaScript and Python.</p>
        </section>
      </section>
    </footer>
</article>
    
    
    

  </div>
</main>


<aside class="read-next outer">
  <div class="inner">
    <div class="read-next-feed">      
      
<article class="read-next-card" 
            style="background-image: url(https://codewithhugo.com/img/cover.jpg);" >
    <header class="read-next-card-header">
        <small class="read-next-card-header-sitetitle">&mdash; Code with Hugo &mdash;</small>
        
        <h3 class="read-next-card-header-title"><a href="https://codewithhugo.com/tags/javascript/">#JavaScript</a></h3>
    </header>
    <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
    </div>

    <div class="read-next-card-content">
      
        <ul>
          <li><a href="https://codewithhugo.com/why-css-is-hard/">Why CSS is hard</a></li>            
        
          <li><a href="https://codewithhugo.com/split-an-existing-git-commit/">Split an existing git commit</a></li>            
        
          <li><a href="https://codewithhugo.com/es6-by-example-a-module/cli-to-wait-for-postgres-in-docker-compose/">ES6 by example: a module/CLI to wait for Postgres in docker-compose</a></li>            
        
          <li><a href="https://codewithhugo.com/closures-partial-application-and-currying-effective-functional-javascript/">Closures, Partial Application and Currying: Effective Functional JavaScript</a></li>            
        </ul>
    </div>
    <footer class="read-next-card-footer">
      
        <a href="https://codewithhugo.com/tags/javascript/">See all related posts ‚Üí</a>
    </footer>
</article>


      
      <article class="post-card post"> 
    
    <a class="post-card-image-link" href="https://codewithhugo.com/how-to-make-beautiful-simple-cli-apps-with-node/">
      <div class="post-card-image" style="background-image: url(https://codewithhugo.com/img/cli-screenshot.jpeg)"></div>
    </a>
    

    <div class="post-card-content">
      <a class="post-card-content-link" href="https://codewithhugo.com/how-to-make-beautiful-simple-cli-apps-with-node/">
          <header class="post-card-header">
              <span class="post-card-tags">
              #JavaScript 
              #Node 
              #CLI  </span>
              
              <h2 class="post-card-title">How to make beautiful, simple CLI apps with Node</h2>
          </header>
          <section class="post-card-excerpt">
              
                <p>Channel your inner Sindre Sohrus and ship a beautifully simple CLI app using Node.
Command line apps are a neat way to package repetitive tasks. This will walk you through some tools that are useful to build CLI apps.
 The idea üí° Piping to the command line üöá Dealing with sequential actions ‚ú® Executable JavaScript files ü¶Ö Adding package binaries üì¶ Publishing to npm üöÄ  The idea üí° When merging/rebasing, the file that always seems to cause trouble is the package-lock. ...  </p>
              
          </section>
      </a>

      <footer class="post-card-meta">
          <img class="author-profile-image" src="https://cdn-images-1.medium.com/fit/c/200/200/0*Rb-aDjpTtV1UZA4O.jpeg" alt="Author" />
          <span class="post-card-author"><a href="/">Hugo Di Francesco</a></span>
      </footer>
    </div>
</article>
      
      
      <article class="post-card post"> 
    
    <a class="post-card-image-link" href="https://codewithhugo.com/from-angularjs-to-vue.js-commonjs-and-jest/">
      <div class="post-card-image" style="background-image: url(https://codewithhugo.com/img/justyn-warner-unsplash.jpg)"></div>
    </a>
    

    <div class="post-card-content">
      <a class="post-card-content-link" href="https://codewithhugo.com/from-angularjs-to-vue.js-commonjs-and-jest/">
          <header class="post-card-header">
              <span class="post-card-tags">
              #VueJS 
              #testing 
              #JavaScript  </span>
              
              <h2 class="post-card-title">From AngularJS to Vue.js, CommonJS and Jest</h2>
          </header>
          <section class="post-card-excerpt">
              
                <p>The trials and tribulations of kicking off an AngularJS -&gt; Vue.js migration
 AngularJS was pretty groundbreaking. It‚Äôs still impressive to this day, packed with a router, an HTTP client, a dependency injection system and a bunch of other things I haven‚Äôt necessarily had the pleasure of dealing with. It also wraps most browser APIs as injectable services, that‚Äôs pretty cool. The downside is that it‚Äôs complicated: services, filters, injectors, directives, controllers, apps, components. ...  </p>
              
          </section>
      </a>

      <footer class="post-card-meta">
          <img class="author-profile-image" src="https://cdn-images-1.medium.com/fit/c/200/200/0*Rb-aDjpTtV1UZA4O.jpeg" alt="Author" />
          <span class="post-card-author"><a href="/">Hugo Di Francesco</a></span>
      </footer>
    </div>
</article>
      
    </div>
  </div>
</aside>

<div class="floating-header">
  <div class="floating-header-logo">
    <a href="https://codewithhugo.com/">
      
      <span>Code with Hugo</span>
    </a>
  </div>
  <span class="floating-header-divider">&mdash;</span>
  <div class="floating-header-title">Setting up Express and Redis with Docker compose</div>
  <div class="floating-header-share">
    <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
     <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/></svg>
    </div>
    
    <a class="floating-header-share-tw" href="https://twitter.com/share?text=Setting%20up%20Express%20and%20Redis%20with%20Docker%20compose&amp;url=https%3a%2f%2fcodewithhugo.com%2fsetting-up-express-and-redis-with-docker-compose%2f"
          onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
      </a>
      <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fcodewithhugo.com%2fsetting-up-express-and-redis-with-docker-compose%2f"
          onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>
      </a>
  </div>

  <progress class="progress" value="0">
    <div class="progress-container">
      <span class="progress-bar"></span>
    </div>
  </progress>
</div>



<footer class="site-footer outer">
  <div class="site-footer-content inner">
    <section class="copyright" style="line-height: 1.3em;">
      <a href="/">Code with Hugo</a>  <br>
      
    </section>
    <nav class="site-footer-nav">
        <a href="/">Latest Posts</a>
        
        <a href="https://twitter.com/hugo__df" target="_blank" rel="noopener">Twitter</a>
        <a href="https://github.com/HugoDF" target="_blank" rel="noopener">Github</a>
        
        <a href="https://medium.com/@hugo__df" target="_blank" rel="noopener">Medium</a>
    </nav>  
  </div>
</footer>

</div>

<script type="text/javascript" src="//code.jquery.com/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="https://codewithhugo.com/js/jquery.fitvids.js"></script>




  <!-- Google Analytics -->
  <script>
    var _gaq=[['_setAccount','UA-60469708-1'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
  </script>


    <script>





$(document).ready(function () {
    
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>
</body></html>
